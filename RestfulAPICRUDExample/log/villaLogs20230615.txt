2023-06-15 08:47:32.044 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 08:47:32.677 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 08:47:32.807 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2023-06-15 08:47:32.809 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2023-06-15 08:47:32.810 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2023-06-15 08:47:32.810 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2023-06-15 08:47:32.813 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2023-06-15 08:47:32.813 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2023-06-15 08:47:32.813 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2023-06-15 08:47:32.813 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2023-06-15 08:47:32.879 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 08:47:44.368 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 08:47:44.880 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 08:47:44.951 +07:00 [DBG] Migrating using database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:44.959 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.282 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.292 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-06-15 08:47:45.300 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (7ms).
2023-06-15 08:47:45.310 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-06-15 08:47:45.336 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-06-15 08:47:45.339 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.343 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.350 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-06-15 08:47:45.350 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-06-15 08:47:45.350 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.350 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.351 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-06-15 08:47:45.375 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-06-15 08:47:45.375 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.375 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.376 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.376 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.376 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-06-15 08:47:45.376 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-06-15 08:47:45.377 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-06-15 08:47:45.378 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-06-15 08:47:45.378 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.378 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.378 +07:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2023-06-15 08:47:45.378 +07:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2023-06-15 08:47:45.378 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.378 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.378 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-06-15 08:47:45.379 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-06-15 08:47:45.379 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.379 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.397 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 08:47:45.397 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-06-15 08:47:45.397 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.397 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.397 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-06-15 08:47:45.404 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-06-15 08:47:45.406 +07:00 [DBG] A data reader was disposed.
2023-06-15 08:47:45.406 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.406 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.415 +07:00 [INF] Applying migration '20230615014732_addUserstoDb'.
2023-06-15 08:47:45.452 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.453 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.454 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-06-15 08:47:45.460 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-06-15 08:47:45.461 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-06-15 08:47:45.461 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-06-15 08:47:45.461 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [LocalUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(max) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_LocalUsers] PRIMARY KEY ([Id])
);
2023-06-15 08:47:45.493 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [LocalUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(max) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Password] nvarchar(max) NOT NULL,
    [Role] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_LocalUsers] PRIMARY KEY ([Id])
);
2023-06-15 08:47:45.493 +07:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2023-06-15 08:47:45.493 +07:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2023-06-15 08:47:45.493 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230615014732_addUserstoDb', N'6.0.18');
2023-06-15 08:47:45.496 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230615014732_addUserstoDb', N'6.0.18');
2023-06-15 08:47:45.497 +07:00 [DBG] Committing transaction.
2023-06-15 08:47:45.500 +07:00 [DBG] Committed transaction.
2023-06-15 08:47:45.501 +07:00 [DBG] Disposing transaction.
2023-06-15 08:47:45.501 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.501 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 08:47:45.502 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 09:55:11.358 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-06-15 09:55:11.477 +07:00 [DBG] Hosting starting
2023-06-15 09:55:11.526 +07:00 [INF] User profile is available. Using 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-15 09:55:11.584 +07:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2023-06-15 09:55:11.585 +07:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2023-06-15 09:55:11.592 +07:00 [INF] Creating key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with creation date 2023-06-15 02:55:11Z, activation date 2023-06-15 02:55:11Z, and expiration date 2023-09-13 02:55:11Z.
2023-06-15 09:55:11.606 +07:00 [DBG] Descriptor deserializer type for key {2f4877b4-2456-4d34-a4e8-4b53811009c5} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2023-06-15 09:55:11.616 +07:00 [DBG] No key escrow sink found. Not writing key {2f4877b4-2456-4d34-a4e8-4b53811009c5} to escrow.
2023-06-15 09:55:11.626 +07:00 [DBG] Encrypting to Windows DPAPI for current user account (QUOCTH-TT-VD\This PC).
2023-06-15 09:55:11.636 +07:00 [INF] Writing data to file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 09:55:11.637 +07:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2023-06-15 09:55:11.638 +07:00 [DBG] Reading data from file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 09:55:11.666 +07:00 [DBG] Found key {2f4877b4-2456-4d34-a4e8-4b53811009c5}.
2023-06-15 09:55:11.671 +07:00 [DBG] Considering key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with expiration date 2023-09-13 02:55:11Z as default key.
2023-06-15 09:55:11.672 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 09:55:11.672 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-06-15 09:55:11.673 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 09:55:11.677 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-06-15 09:55:11.680 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-06-15 09:55:11.684 +07:00 [DBG] Using key {2f4877b4-2456-4d34-a4e8-4b53811009c5} as the default key.
2023-06-15 09:55:11.685 +07:00 [DBG] Key ring with default key {2f4877b4-2456-4d34-a4e8-4b53811009c5} was loaded during application startup.
2023-06-15 09:55:11.865 +07:00 [INF] Now listening on: http://localhost:5208
2023-06-15 09:55:11.865 +07:00 [DBG] Loaded hosting startup assembly RestfulAPICRUDExample
2023-06-15 09:55:11.865 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-06-15 09:55:11.865 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-06-15 09:55:11.865 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-15 09:55:11.865 +07:00 [INF] Hosting environment: Development
2023-06-15 09:55:11.865 +07:00 [INF] Content root path: C:\Users\This PC\source\repos\RestfulAPICRUDExample\RestfulAPICRUDExample\
2023-06-15 09:55:11.865 +07:00 [DBG] Hosting started
2023-06-15 09:55:12.197 +07:00 [DBG] Connection id "0HMRD9FO28DDH" accepted.
2023-06-15 09:55:12.197 +07:00 [DBG] Connection id "0HMRD9FO28DDG" accepted.
2023-06-15 09:55:12.199 +07:00 [DBG] Connection id "0HMRD9FO28DDG" started.
2023-06-15 09:55:12.199 +07:00 [DBG] Connection id "0HMRD9FO28DDH" started.
2023-06-15 09:55:13.106 +07:00 [DBG] Connection id "0HMRD9FO28DDI" accepted.
2023-06-15 09:55:13.107 +07:00 [DBG] Connection id "0HMRD9FO28DDJ" accepted.
2023-06-15 09:55:13.107 +07:00 [DBG] Connection id "0HMRD9FO28DDJ" started.
2023-06-15 09:55:13.108 +07:00 [DBG] Connection id "0HMRD9FO28DDI" started.
2023-06-15 09:55:13.421 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2023-06-15 09:55:13.507 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-06-15 09:55:13.603 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-06-15 09:55:13.603 +07:00 [DBG] Request did not match any endpoints
2023-06-15 09:55:13.848 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-06-15 09:55:14.199 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-06-15 09:55:14.200 +07:00 [DBG] Connection id "0HMRD9FO28DDI" completed keep alive response.
2023-06-15 09:55:14.207 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 791.0049ms
2023-06-15 09:55:14.285 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_vs/browserLink - -
2023-06-15 09:55:14.288 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2023-06-15 09:55:14.314 +07:00 [DBG] Connection id "0HMRD9FO28DDI" completed keep alive response.
2023-06-15 09:55:14.314 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 25.8939ms
2023-06-15 09:55:14.478 +07:00 [DBG] Connection id "0HMRD9FO28DDJ" completed keep alive response.
2023-06-15 09:55:14.478 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 193.2251ms
2023-06-15 09:55:14.588 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2023-06-15 09:55:14.588 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-06-15 09:55:14.588 +07:00 [DBG] Request did not match any endpoints
2023-06-15 09:55:14.974 +07:00 [DBG] Connection id "0HMRD9FO28DDJ" completed keep alive response.
2023-06-15 09:55:14.974 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 386.5260ms
2023-06-15 09:55:20.505 +07:00 [DBG] Connection id "0HMRD9FO28DDI" received FIN.
2023-06-15 09:55:20.505 +07:00 [DBG] Connection id "0HMRD9FO28DDJ" received FIN.
2023-06-15 09:55:20.520 +07:00 [DBG] Connection id "0HMRD9FO28DDJ" disconnecting.
2023-06-15 09:55:20.520 +07:00 [DBG] Connection id "0HMRD9FO28DDI" disconnecting.
2023-06-15 09:55:20.521 +07:00 [DBG] Connection id "0HMRD9FO28DDI" sending FIN because: "The client closed the connection."
2023-06-15 09:55:20.521 +07:00 [DBG] Connection id "0HMRD9FO28DDJ" sending FIN because: "The client closed the connection."
2023-06-15 09:55:20.523 +07:00 [DBG] Connection id "0HMRD9FO28DDJ" stopped.
2023-06-15 09:55:20.523 +07:00 [DBG] Connection id "0HMRD9FO28DDI" stopped.
2023-06-15 09:55:21.569 +07:00 [DBG] Connection id "0HMRD9FO28DDK" accepted.
2023-06-15 09:55:21.569 +07:00 [DBG] Connection id "0HMRD9FO28DDK" started.
2023-06-15 09:55:21.570 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 09:55:21.581 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 09:55:21.586 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 09:55:21.586 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 09:55:21.588 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 09:55:21.594 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 09:55:22.351 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 09:55:22.351 +07:00 [DBG] Connection id "0HMRD9FO28DDK" completed keep alive response.
2023-06-15 09:55:22.351 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 781.4976ms
2023-06-15 09:55:30.527 +07:00 [DBG] Connection id "0HMRD9FO28DDK" received FIN.
2023-06-15 09:55:30.527 +07:00 [DBG] Connection id "0HMRD9FO28DDK" sending FIN because: "The client closed the connection."
2023-06-15 09:55:30.528 +07:00 [DBG] Connection id "0HMRD9FO28DDK" disconnecting.
2023-06-15 09:55:30.528 +07:00 [DBG] Connection id "0HMRD9FO28DDK" stopped.
2023-06-15 09:55:56.277 +07:00 [DBG] Connection id "0HMRD9FO28DDL" accepted.
2023-06-15 09:55:56.285 +07:00 [DBG] Connection id "0HMRD9FO28DDL" started.
2023-06-15 09:55:56.293 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth application/json-patch+json 96
2023-06-15 09:55:56.294 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth'
2023-06-15 09:55:56.294 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Register (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth' is valid for the request path '/api/UsersAuth'
2023-06-15 09:55:56.294 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Register (RestfulAPICRUDExample)'
2023-06-15 09:55:56.294 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 09:55:56.316 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 09:55:56.318 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Register (RestfulAPICRUDExample)'
2023-06-15 09:55:56.373 +07:00 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RestfulAPICRUDExample.Models.DTO.RegistrationRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 09:55:56.373 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 09:55:56.373 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 09:55:56.374 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 09:55:56.374 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 09:55:56.374 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 09:55:56.375 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 09:55:56.608 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 09:55:56.641 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 09:55:56.646 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.RegistrationRequestDTO' ...
2023-06-15 09:55:56.647 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.RegistrationRequestDTO' using the name '' in request data ...
2023-06-15 09:55:56.648 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 09:55:56.648 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 09:55:56.673 +07:00 [DBG] Connection id "0HMRD9FO28DDL", Request id "0HMRD9FO28DDL:00000002": started reading request body.
2023-06-15 09:55:56.674 +07:00 [DBG] Connection id "0HMRD9FO28DDL", Request id "0HMRD9FO28DDL:00000002": done reading request body.
2023-06-15 09:55:56.854 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.RegistrationRequestDTO'.
2023-06-15 09:55:56.854 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.RegistrationRequestDTO'.
2023-06-15 09:55:56.854 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.RegistrationRequestDTO' ...
2023-06-15 09:55:56.863 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.RegistrationRequestDTO'.
2023-06-15 09:55:57.625 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 09:55:57.724 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName == __username_0)'
2023-06-15 09:55:58.127 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE l.UserName == @__username_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 09:55:58.193 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 09:55:58.257 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (61ms).
2023-06-15 09:55:58.276 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:55:58.681 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:55:58.696 +07:00 [DBG] Executing DbCommand [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE [l].[UserName] = @__username_0
2023-06-15 09:55:58.816 +07:00 [INF] Executed DbCommand (123ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE [l].[UserName] = @__username_0
2023-06-15 09:55:58.840 +07:00 [DBG] A data reader was disposed.
2023-06-15 09:55:58.847 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:55:58.864 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:55:58.914 +07:00 [DBG] 'ApplicationDbContext' generated a temporary value for the property 'Id.LocalUser'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 09:55:58.966 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 09:55:58.974 +07:00 [DBG] SaveChanges starting for 'ApplicationDbContext'.
2023-06-15 09:55:58.976 +07:00 [DBG] DetectChanges starting for 'ApplicationDbContext'.
2023-06-15 09:55:58.986 +07:00 [DBG] DetectChanges completed for 'ApplicationDbContext'.
2023-06-15 09:55:59.016 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:55:59.025 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:55:59.029 +07:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2023-06-15 09:55:59.049 +07:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2023-06-15 09:55:59.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 09:55:59.136 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-06-15 09:55:59.139 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [LocalUsers] ([Name], [Password], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [LocalUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-06-15 09:55:59.202 +07:00 [INF] Executed DbCommand (63ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [LocalUsers] ([Name], [Password], [Role], [UserName])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [LocalUsers]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2023-06-15 09:55:59.234 +07:00 [DBG] The foreign key property 'LocalUser.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-06-15 09:55:59.244 +07:00 [DBG] A data reader was disposed.
2023-06-15 09:55:59.262 +07:00 [DBG] Committing transaction.
2023-06-15 09:55:59.270 +07:00 [DBG] Committed transaction.
2023-06-15 09:55:59.275 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:55:59.276 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:55:59.280 +07:00 [DBG] Disposing transaction.
2023-06-15 09:55:59.297 +07:00 [DBG] An entity of type 'LocalUser' tracked by 'ApplicationDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 09:55:59.303 +07:00 [DBG] SaveChanges completed for 'ApplicationDbContext' with 1 entities written to the database.
2023-06-15 09:55:59.310 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 09:55:59.311 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 09:55:59.312 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 09:55:59.312 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 09:55:59.312 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 09:55:59.312 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 09:55:59.404 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Register (RestfulAPICRUDExample) in 3021.7354ms
2023-06-15 09:55:59.406 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Register (RestfulAPICRUDExample)'
2023-06-15 09:55:59.408 +07:00 [DBG] Connection id "0HMRD9FO28DDL" completed keep alive response.
2023-06-15 09:55:59.414 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 09:55:59.419 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth application/json-patch+json 96 - 200 141 application/json;+charset=utf-8 3126.2932ms
2023-06-15 09:56:00.566 +07:00 [DBG] Connection id "0HMRD9FO28DDL" received FIN.
2023-06-15 09:56:00.567 +07:00 [DBG] Connection id "0HMRD9FO28DDL" sending FIN because: "The client closed the connection."
2023-06-15 09:56:00.567 +07:00 [DBG] Connection id "0HMRD9FO28DDL" disconnecting.
2023-06-15 09:56:00.567 +07:00 [DBG] Connection id "0HMRD9FO28DDL" stopped.
2023-06-15 09:56:13.172 +07:00 [DBG] Connection id "0HMRD9FO28DDM" accepted.
2023-06-15 09:56:13.172 +07:00 [DBG] Connection id "0HMRD9FO28DDM" started.
2023-06-15 09:56:13.172 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55
2023-06-15 09:56:13.172 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth/login'
2023-06-15 09:56:13.172 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth/login' is valid for the request path '/api/UsersAuth/login'
2023-06-15 09:56:13.172 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 09:56:13.172 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 09:56:13.175 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 09:56:13.176 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 09:56:13.182 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RestfulAPICRUDExample.Models.DTO.LoginRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 09:56:13.182 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 09:56:13.182 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 09:56:13.182 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 09:56:13.182 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 09:56:13.182 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 09:56:13.182 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 09:56:13.183 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 09:56:13.183 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 09:56:13.183 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' using the name '' in request data ...
2023-06-15 09:56:13.183 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 09:56:13.184 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 09:56:13.184 +07:00 [DBG] Connection id "0HMRD9FO28DDM", Request id "0HMRD9FO28DDM:00000002": started reading request body.
2023-06-15 09:56:13.184 +07:00 [DBG] Connection id "0HMRD9FO28DDM", Request id "0HMRD9FO28DDM:00000002": done reading request body.
2023-06-15 09:56:13.186 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 09:56:13.186 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 09:56:13.186 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 09:56:13.187 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 09:56:13.204 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 09:56:13.218 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName.ToLower() == __ToLower_0 && u.Password == __loginRequestDTO_Password_1)'
2023-06-15 09:56:13.273 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE (LOWER(l.UserName) == @__ToLower_0) && (l.Password == @__loginRequestDTO_Password_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 09:56:13.285 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 09:56:13.286 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-06-15 09:56:13.286 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:56:13.286 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:56:13.287 +07:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 09:56:13.378 +07:00 [INF] Executed DbCommand (91ms) [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 09:56:13.382 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 09:56:13.383 +07:00 [DBG] A data reader was disposed.
2023-06-15 09:56:13.383 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:56:13.383 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:56:13.727 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 09:56:13.727 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 09:56:13.727 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 09:56:13.727 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 09:56:13.728 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 09:56:13.728 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 09:56:13.728 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample) in 546.1034ms
2023-06-15 09:56:13.728 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 09:56:13.729 +07:00 [DBG] Connection id "0HMRD9FO28DDM" completed keep alive response.
2023-06-15 09:56:13.729 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 09:56:13.729 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55 - 200 355 application/json;+charset=utf-8 556.5410ms
2023-06-15 09:56:20.582 +07:00 [DBG] Connection id "0HMRD9FO28DDM" received FIN.
2023-06-15 09:56:20.582 +07:00 [DBG] Connection id "0HMRD9FO28DDM" sending FIN because: "The client closed the connection."
2023-06-15 09:56:20.582 +07:00 [DBG] Connection id "0HMRD9FO28DDM" disconnecting.
2023-06-15 09:56:20.582 +07:00 [DBG] Connection id "0HMRD9FO28DDM" stopped.
2023-06-15 09:56:30.020 +07:00 [DBG] Connection id "0HMRD9FO28DDN" accepted.
2023-06-15 09:56:30.020 +07:00 [DBG] Connection id "0HMRD9FO28DDN" started.
2023-06-15 09:56:30.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 09:56:30.021 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 09:56:30.021 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 09:56:30.021 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 09:56:30.021 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 09:56:30.021 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 09:56:30.022 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 09:56:30.022 +07:00 [DBG] Connection id "0HMRD9FO28DDN" completed keep alive response.
2023-06-15 09:56:30.022 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 1.2766ms
2023-06-15 09:56:30.590 +07:00 [DBG] Connection id "0HMRD9FO28DDN" received FIN.
2023-06-15 09:56:30.590 +07:00 [DBG] Connection id "0HMRD9FO28DDN" sending FIN because: "The client closed the connection."
2023-06-15 09:56:30.590 +07:00 [DBG] Connection id "0HMRD9FO28DDN" disconnecting.
2023-06-15 09:56:30.590 +07:00 [DBG] Connection id "0HMRD9FO28DDN" stopped.
2023-06-15 09:56:39.807 +07:00 [DBG] Connection id "0HMRD9FO28DDO" accepted.
2023-06-15 09:56:39.808 +07:00 [DBG] Connection id "0HMRD9FO28DDO" started.
2023-06-15 09:56:39.814 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 09:56:39.814 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 09:56:39.814 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 09:56:39.814 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 09:56:39.814 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 09:56:39.815 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 09:56:39.815 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 09:56:39.815 +07:00 [DBG] Connection id "0HMRD9FO28DDO" completed keep alive response.
2023-06-15 09:56:39.815 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 1.0172ms
2023-06-15 09:56:40.587 +07:00 [DBG] Connection id "0HMRD9FO28DDO" received FIN.
2023-06-15 09:56:40.588 +07:00 [DBG] Connection id "0HMRD9FO28DDO" sending FIN because: "The client closed the connection."
2023-06-15 09:56:40.588 +07:00 [DBG] Connection id "0HMRD9FO28DDO" disconnecting.
2023-06-15 09:56:40.588 +07:00 [DBG] Connection id "0HMRD9FO28DDO" stopped.
2023-06-15 09:58:09.241 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-06-15 09:58:09.364 +07:00 [DBG] Hosting starting
2023-06-15 09:58:09.419 +07:00 [INF] User profile is available. Using 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-15 09:58:09.457 +07:00 [DBG] Reading data from file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 09:58:09.482 +07:00 [DBG] Found key {2f4877b4-2456-4d34-a4e8-4b53811009c5}.
2023-06-15 09:58:09.503 +07:00 [DBG] Considering key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with expiration date 2023-09-13 02:55:11Z as default key.
2023-06-15 09:58:09.506 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 09:58:09.511 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-06-15 09:58:09.513 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 09:58:09.519 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-06-15 09:58:09.524 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-06-15 09:58:09.529 +07:00 [DBG] Using key {2f4877b4-2456-4d34-a4e8-4b53811009c5} as the default key.
2023-06-15 09:58:09.530 +07:00 [DBG] Key ring with default key {2f4877b4-2456-4d34-a4e8-4b53811009c5} was loaded during application startup.
2023-06-15 09:58:09.785 +07:00 [INF] Now listening on: http://localhost:5208
2023-06-15 09:58:09.785 +07:00 [DBG] Loaded hosting startup assembly RestfulAPICRUDExample
2023-06-15 09:58:09.785 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-06-15 09:58:09.785 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-06-15 09:58:09.786 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-15 09:58:09.786 +07:00 [INF] Hosting environment: Development
2023-06-15 09:58:09.786 +07:00 [INF] Content root path: C:\Users\This PC\source\repos\RestfulAPICRUDExample\RestfulAPICRUDExample\
2023-06-15 09:58:09.786 +07:00 [DBG] Hosting started
2023-06-15 09:58:09.962 +07:00 [DBG] Connection id "0HMRD9HD1J5IT" received FIN.
2023-06-15 09:58:09.966 +07:00 [DBG] Connection id "0HMRD9HD1J5IT" accepted.
2023-06-15 09:58:09.966 +07:00 [DBG] Connection id "0HMRD9HD1J5IT" started.
2023-06-15 09:58:09.973 +07:00 [DBG] Connection id "0HMRD9HD1J5IT" sending FIN because: "The client closed the connection."
2023-06-15 09:58:09.977 +07:00 [DBG] Connection id "0HMRD9HD1J5IT" disconnecting.
2023-06-15 09:58:09.982 +07:00 [DBG] Connection id "0HMRD9HD1J5IT" stopped.
2023-06-15 09:58:10.550 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" accepted.
2023-06-15 09:58:10.551 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" started.
2023-06-15 09:58:10.575 +07:00 [DBG] Connection id "0HMRD9HD1J5IV" accepted.
2023-06-15 09:58:10.577 +07:00 [DBG] Connection id "0HMRD9HD1J5IV" started.
2023-06-15 09:58:10.663 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2023-06-15 09:58:10.712 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-06-15 09:58:10.735 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-06-15 09:58:10.735 +07:00 [DBG] Request did not match any endpoints
2023-06-15 09:58:10.856 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-06-15 09:58:11.026 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2023-06-15 09:58:11.033 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" completed keep alive response.
2023-06-15 09:58:11.034 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 6.4366ms
2023-06-15 09:58:11.048 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-06-15 09:58:11.048 +07:00 [DBG] Connection id "0HMRD9HD1J5IV" completed keep alive response.
2023-06-15 09:58:11.051 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 394.3761ms
2023-06-15 09:58:11.051 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_vs/browserLink - -
2023-06-15 09:58:11.096 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" completed keep alive response.
2023-06-15 09:58:11.096 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 44.9111ms
2023-06-15 09:58:11.169 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2023-06-15 09:58:11.170 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-06-15 09:58:11.170 +07:00 [DBG] Request did not match any endpoints
2023-06-15 09:58:11.422 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" completed keep alive response.
2023-06-15 09:58:11.422 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 252.8472ms
2023-06-15 09:58:23.734 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55
2023-06-15 09:58:23.743 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth/login'
2023-06-15 09:58:23.748 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth/login' is valid for the request path '/api/UsersAuth/login'
2023-06-15 09:58:23.749 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 09:58:23.752 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 09:58:23.841 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 09:58:23.843 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 09:58:23.868 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RestfulAPICRUDExample.Models.DTO.LoginRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 09:58:23.868 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 09:58:23.868 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 09:58:23.869 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 09:58:23.869 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 09:58:23.869 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 09:58:23.869 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 09:58:24.059 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 09:58:24.086 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 09:58:24.090 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 09:58:24.093 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' using the name '' in request data ...
2023-06-15 09:58:24.095 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 09:58:24.095 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 09:58:24.113 +07:00 [DBG] Connection id "0HMRD9HD1J5IU", Request id "0HMRD9HD1J5IU:00000005": started reading request body.
2023-06-15 09:58:24.113 +07:00 [DBG] Connection id "0HMRD9HD1J5IU", Request id "0HMRD9HD1J5IU:00000005": done reading request body.
2023-06-15 09:58:24.262 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 09:58:24.262 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 09:58:24.262 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 09:58:24.268 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 09:58:24.954 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 09:58:25.053 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName.ToLower() == __ToLower_0 && u.Password == __loginRequestDTO_Password_1)'
2023-06-15 09:58:25.500 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE (LOWER(l.UserName) == @__ToLower_0) && (l.Password == @__loginRequestDTO_Password_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 09:58:25.562 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 09:58:25.612 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (45ms).
2023-06-15 09:58:25.631 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:58:25.986 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:58:26.000 +07:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 09:58:26.085 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 09:58:26.120 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 09:58:26.153 +07:00 [DBG] A data reader was disposed.
2023-06-15 09:58:26.156 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:58:26.167 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:58:26.312 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 09:58:26.316 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 09:58:26.316 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 09:58:26.316 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 09:58:26.317 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 09:58:26.317 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 09:58:26.376 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample) in 2501.6245ms
2023-06-15 09:58:26.377 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 09:58:26.377 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" completed keep alive response.
2023-06-15 09:58:26.381 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 09:58:26.385 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55 - 200 355 application/json;+charset=utf-8 2651.0331ms
2023-06-15 09:58:48.939 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 09:58:48.946 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 09:58:48.946 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 09:58:48.947 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 09:58:48.948 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 09:58:48.958 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 09:58:48.971 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 09:58:48.971 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" completed keep alive response.
2023-06-15 09:58:48.971 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 32.5616ms
2023-06-15 09:58:59.726 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI/1 - -
2023-06-15 09:58:59.726 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI/1'
2023-06-15 09:58:59.726 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI/{id}' is valid for the request path '/api/VillaAPI/1'
2023-06-15 09:58:59.726 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)'
2023-06-15 09:58:59.726 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 09:58:59.730 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 09:58:59.730 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)'
2023-06-15 09:58:59.739 +07:00 [INF] Route matched with {action = "GetVilla", controller = "VillaAPI"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestfulAPICRUDExample.Models.DTO.VillaDTO]] GetVilla(Int32) on controller RestfulAPICRUDExample.Controllers.VillaAPIController (RestfulAPICRUDExample).
2023-06-15 09:58:59.739 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 09:58:59.739 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 09:58:59.739 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 09:58:59.739 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 09:58:59.739 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 09:58:59.739 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.VillaAPIController (RestfulAPICRUDExample)
2023-06-15 09:58:59.857 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.VillaAPIController (RestfulAPICRUDExample)
2023-06-15 09:58:59.858 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-06-15 09:58:59.858 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-06-15 09:58:59.859 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-06-15 09:58:59.859 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-06-15 09:58:59.859 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-06-15 09:58:59.860 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-06-15 09:58:59.881 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 09:58:59.890 +07:00 [DBG] Compiling query expression: 
'DbSet<Villa>()
    .Where(u => u.Id == __id_0)
    .FirstOrDefault()'
2023-06-15 09:58:59.897 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Villa>(
    asyncEnumerable: new SingleQueryingEnumerable<Villa>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Villa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Villa.Amenity (string) Required, 1], [Property: Villa.CreatedDate (DateTime) Required, 2], [Property: Villa.Details (string) Required, 3], [Property: Villa.ImageUrl (string) Required, 4], [Property: Villa.Name (string) Required, 5], [Property: Villa.Occupancy (int) Required, 6], [Property: Villa.Rate (double) Required, 7], [Property: Villa.Sqft (int) Required, 8], [Property: Villa.UpdatedDate (DateTime) Required, 9] }
            SELECT TOP(1) v.Id, v.Amenity, v.CreatedDate, v.Details, v.ImageUrl, v.Name, v.Occupancy, v.Rate, v.Sqft, v.UpdatedDate
            FROM Villas AS v
            WHERE v.Id == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Villa>, 
        RestfulAPICRUDExample.Data.ApplicationDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-06-15 09:58:59.919 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 09:58:59.919 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-06-15 09:58:59.926 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:58:59.934 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:58:59.937 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amenity], [v].[CreatedDate], [v].[Details], [v].[ImageUrl], [v].[Name], [v].[Occupancy], [v].[Rate], [v].[Sqft], [v].[UpdatedDate]
FROM [Villas] AS [v]
WHERE [v].[Id] = @__id_0
2023-06-15 09:58:59.971 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amenity], [v].[CreatedDate], [v].[Details], [v].[ImageUrl], [v].[Name], [v].[Occupancy], [v].[Rate], [v].[Sqft], [v].[UpdatedDate]
FROM [Villas] AS [v]
WHERE [v].[Id] = @__id_0
2023-06-15 09:58:59.992 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'Villa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 09:59:00.024 +07:00 [DBG] A data reader was disposed.
2023-06-15 09:59:00.035 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:59:00.036 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 09:59:00.057 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 09:59:00.059 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-06-15 09:59:00.059 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-06-15 09:59:00.059 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 09:59:00.059 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 09:59:00.059 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 09:59:00.059 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.DTO.VillaDTO'.
2023-06-15 09:59:00.067 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample) in 328.0252ms
2023-06-15 09:59:00.069 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)'
2023-06-15 09:59:00.071 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" completed keep alive response.
2023-06-15 09:59:00.071 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 09:59:00.071 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI/1 - - - 200 133 application/json;+charset=utf-8 345.3370ms
2023-06-15 09:59:10.804 +07:00 [DBG] Connection id "0HMRD9HD1J5IV" received FIN.
2023-06-15 09:59:10.804 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" received FIN.
2023-06-15 09:59:10.805 +07:00 [DBG] Connection id "0HMRD9HD1J5IV" sending FIN because: "The client closed the connection."
2023-06-15 09:59:10.805 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" sending FIN because: "The client closed the connection."
2023-06-15 09:59:10.805 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" disconnecting.
2023-06-15 09:59:10.805 +07:00 [DBG] Connection id "0HMRD9HD1J5IV" disconnecting.
2023-06-15 09:59:10.808 +07:00 [DBG] Connection id "0HMRD9HD1J5IU" stopped.
2023-06-15 09:59:10.808 +07:00 [DBG] Connection id "0HMRD9HD1J5IV" stopped.
2023-06-15 10:02:51.887 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-06-15 10:02:52.001 +07:00 [DBG] Hosting starting
2023-06-15 10:02:52.073 +07:00 [INF] User profile is available. Using 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-15 10:02:52.144 +07:00 [DBG] Reading data from file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 10:02:52.173 +07:00 [DBG] Found key {2f4877b4-2456-4d34-a4e8-4b53811009c5}.
2023-06-15 10:02:52.191 +07:00 [DBG] Considering key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with expiration date 2023-09-13 02:55:11Z as default key.
2023-06-15 10:02:52.193 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 10:02:52.198 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-06-15 10:02:52.199 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 10:02:52.205 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-06-15 10:02:52.208 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-06-15 10:02:52.213 +07:00 [DBG] Using key {2f4877b4-2456-4d34-a4e8-4b53811009c5} as the default key.
2023-06-15 10:02:52.214 +07:00 [DBG] Key ring with default key {2f4877b4-2456-4d34-a4e8-4b53811009c5} was loaded during application startup.
2023-06-15 10:02:52.483 +07:00 [INF] Now listening on: http://localhost:5208
2023-06-15 10:02:52.483 +07:00 [DBG] Loaded hosting startup assembly RestfulAPICRUDExample
2023-06-15 10:02:52.483 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-06-15 10:02:52.483 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-06-15 10:02:52.483 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-15 10:02:52.483 +07:00 [INF] Hosting environment: Development
2023-06-15 10:02:52.484 +07:00 [INF] Content root path: C:\Users\This PC\source\repos\RestfulAPICRUDExample\RestfulAPICRUDExample\
2023-06-15 10:02:52.484 +07:00 [DBG] Hosting started
2023-06-15 10:02:52.933 +07:00 [DBG] Connection id "0HMRD9K1BVDEC" accepted.
2023-06-15 10:02:52.965 +07:00 [DBG] Connection id "0HMRD9K1BVDEB" accepted.
2023-06-15 10:02:52.976 +07:00 [DBG] Connection id "0HMRD9K1BVDEC" started.
2023-06-15 10:02:52.980 +07:00 [DBG] Connection id "0HMRD9K1BVDEB" started.
2023-06-15 10:02:52.992 +07:00 [DBG] Connection id "0HMRD9K1BVDEC" received FIN.
2023-06-15 10:02:52.992 +07:00 [DBG] Connection id "0HMRD9K1BVDEB" received FIN.
2023-06-15 10:02:53.051 +07:00 [DBG] Connection id "0HMRD9K1BVDEB" sending FIN because: "The client closed the connection."
2023-06-15 10:02:53.051 +07:00 [DBG] Connection id "0HMRD9K1BVDEC" sending FIN because: "The client closed the connection."
2023-06-15 10:02:53.056 +07:00 [DBG] Connection id "0HMRD9K1BVDEC" disconnecting.
2023-06-15 10:02:53.055 +07:00 [DBG] Connection id "0HMRD9K1BVDEB" disconnecting.
2023-06-15 10:02:53.068 +07:00 [DBG] Connection id "0HMRD9K1BVDEB" stopped.
2023-06-15 10:02:53.068 +07:00 [DBG] Connection id "0HMRD9K1BVDEC" stopped.
2023-06-15 10:02:53.647 +07:00 [DBG] Connection id "0HMRD9K1BVDED" accepted.
2023-06-15 10:02:53.649 +07:00 [DBG] Connection id "0HMRD9K1BVDEE" accepted.
2023-06-15 10:02:53.649 +07:00 [DBG] Connection id "0HMRD9K1BVDED" started.
2023-06-15 10:02:53.649 +07:00 [DBG] Connection id "0HMRD9K1BVDEE" started.
2023-06-15 10:02:53.786 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2023-06-15 10:02:53.881 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-06-15 10:02:53.930 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-06-15 10:02:53.930 +07:00 [DBG] Request did not match any endpoints
2023-06-15 10:02:54.105 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-06-15 10:02:54.296 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2023-06-15 10:02:54.302 +07:00 [DBG] Connection id "0HMRD9K1BVDEE" completed keep alive response.
2023-06-15 10:02:54.304 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 6.3412ms
2023-06-15 10:02:54.320 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-06-15 10:02:54.320 +07:00 [DBG] Connection id "0HMRD9K1BVDED" completed keep alive response.
2023-06-15 10:02:54.323 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_vs/browserLink - -
2023-06-15 10:02:54.323 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 551.7989ms
2023-06-15 10:02:54.370 +07:00 [DBG] Connection id "0HMRD9K1BVDEE" completed keep alive response.
2023-06-15 10:02:54.370 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 47.2239ms
2023-06-15 10:02:54.470 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2023-06-15 10:02:54.471 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-06-15 10:02:54.471 +07:00 [DBG] Request did not match any endpoints
2023-06-15 10:02:54.713 +07:00 [DBG] Connection id "0HMRD9K1BVDEE" completed keep alive response.
2023-06-15 10:02:54.713 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 242.6432ms
2023-06-15 10:03:01.156 +07:00 [DBG] Connection id "0HMRD9K1BVDED" received FIN.
2023-06-15 10:03:01.156 +07:00 [DBG] Connection id "0HMRD9K1BVDEE" received FIN.
2023-06-15 10:03:01.156 +07:00 [DBG] Connection id "0HMRD9K1BVDEE" sending FIN because: "The client closed the connection."
2023-06-15 10:03:01.156 +07:00 [DBG] Connection id "0HMRD9K1BVDED" sending FIN because: "The client closed the connection."
2023-06-15 10:03:01.156 +07:00 [DBG] Connection id "0HMRD9K1BVDEE" disconnecting.
2023-06-15 10:03:01.157 +07:00 [DBG] Connection id "0HMRD9K1BVDED" disconnecting.
2023-06-15 10:03:01.166 +07:00 [DBG] Connection id "0HMRD9K1BVDEE" stopped.
2023-06-15 10:03:01.166 +07:00 [DBG] Connection id "0HMRD9K1BVDED" stopped.
2023-06-15 10:03:10.425 +07:00 [DBG] Connection id "0HMRD9K1BVDEF" accepted.
2023-06-15 10:03:10.425 +07:00 [DBG] Connection id "0HMRD9K1BVDEF" started.
2023-06-15 10:03:10.427 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55
2023-06-15 10:03:10.435 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth/login'
2023-06-15 10:03:10.441 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth/login' is valid for the request path '/api/UsersAuth/login'
2023-06-15 10:03:10.442 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:03:10.444 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:03:10.543 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 10:03:10.544 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:03:10.589 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RestfulAPICRUDExample.Models.DTO.LoginRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 10:03:10.589 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 10:03:10.589 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 10:03:10.590 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 10:03:10.590 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 10:03:10.590 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 10:03:10.591 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 10:03:10.862 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 10:03:10.900 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 10:03:10.909 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 10:03:10.913 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' using the name '' in request data ...
2023-06-15 10:03:10.914 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 10:03:10.914 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 10:03:10.944 +07:00 [DBG] Connection id "0HMRD9K1BVDEF", Request id "0HMRD9K1BVDEF:00000002": started reading request body.
2023-06-15 10:03:10.945 +07:00 [DBG] Connection id "0HMRD9K1BVDEF", Request id "0HMRD9K1BVDEF:00000002": done reading request body.
2023-06-15 10:03:11.118 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:03:11.118 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:03:11.118 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 10:03:11.127 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:03:11.984 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 10:03:12.105 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName.ToLower() == __ToLower_0 && u.Password == __loginRequestDTO_Password_1)'
2023-06-15 10:03:12.585 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE (LOWER(l.UserName) == @__ToLower_0) && (l.Password == @__loginRequestDTO_Password_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 10:03:12.670 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 10:03:12.743 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (70ms).
2023-06-15 10:03:12.759 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:03:13.210 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:03:13.231 +07:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 10:03:13.326 +07:00 [INF] Executed DbCommand (101ms) [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 10:03:13.371 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 10:03:13.417 +07:00 [DBG] A data reader was disposed.
2023-06-15 10:03:13.422 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:03:13.440 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:03:13.597 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 10:03:13.599 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 10:03:13.599 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 10:03:13.599 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 10:03:13.600 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 10:03:13.600 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 10:03:13.672 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample) in 3074.327ms
2023-06-15 10:03:13.673 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:03:13.674 +07:00 [DBG] Connection id "0HMRD9K1BVDEF" completed keep alive response.
2023-06-15 10:03:13.680 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 10:03:13.687 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55 - 200 355 application/json;+charset=utf-8 3259.1251ms
2023-06-15 10:03:21.193 +07:00 [DBG] Connection id "0HMRD9K1BVDEF" received FIN.
2023-06-15 10:03:21.193 +07:00 [DBG] Connection id "0HMRD9K1BVDEF" sending FIN because: "The client closed the connection."
2023-06-15 10:03:21.193 +07:00 [DBG] Connection id "0HMRD9K1BVDEF" disconnecting.
2023-06-15 10:03:21.193 +07:00 [DBG] Connection id "0HMRD9K1BVDEF" stopped.
2023-06-15 10:03:37.396 +07:00 [DBG] Connection id "0HMRD9K1BVDEG" accepted.
2023-06-15 10:03:37.396 +07:00 [DBG] Connection id "0HMRD9K1BVDEG" started.
2023-06-15 10:03:37.397 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:03:37.398 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:03:37.398 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:03:37.398 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:03:37.398 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:03:37.410 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:03:37.512 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:03:37.513 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:03:37.513 +07:00 [DBG] Connection id "0HMRD9K1BVDEG" completed keep alive response.
2023-06-15 10:03:37.513 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 116.6359ms
2023-06-15 10:03:41.225 +07:00 [DBG] Connection id "0HMRD9K1BVDEG" received FIN.
2023-06-15 10:03:41.225 +07:00 [DBG] Connection id "0HMRD9K1BVDEG" sending FIN because: "The client closed the connection."
2023-06-15 10:03:41.227 +07:00 [DBG] Connection id "0HMRD9K1BVDEG" disconnecting.
2023-06-15 10:03:41.234 +07:00 [DBG] Connection id "0HMRD9K1BVDEG" stopped.
2023-06-15 10:08:22.052 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-06-15 10:08:22.156 +07:00 [DBG] Hosting starting
2023-06-15 10:08:22.202 +07:00 [INF] User profile is available. Using 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-15 10:08:22.245 +07:00 [DBG] Reading data from file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 10:08:22.261 +07:00 [DBG] Found key {2f4877b4-2456-4d34-a4e8-4b53811009c5}.
2023-06-15 10:08:22.272 +07:00 [DBG] Considering key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with expiration date 2023-09-13 02:55:11Z as default key.
2023-06-15 10:08:22.274 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 10:08:22.277 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-06-15 10:08:22.278 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 10:08:22.281 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-06-15 10:08:22.282 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-06-15 10:08:22.284 +07:00 [DBG] Using key {2f4877b4-2456-4d34-a4e8-4b53811009c5} as the default key.
2023-06-15 10:08:22.285 +07:00 [DBG] Key ring with default key {2f4877b4-2456-4d34-a4e8-4b53811009c5} was loaded during application startup.
2023-06-15 10:08:22.486 +07:00 [INF] Now listening on: http://localhost:5208
2023-06-15 10:08:22.486 +07:00 [DBG] Loaded hosting startup assembly RestfulAPICRUDExample
2023-06-15 10:08:22.486 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-06-15 10:08:22.486 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-06-15 10:08:22.486 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-15 10:08:22.486 +07:00 [INF] Hosting environment: Development
2023-06-15 10:08:22.487 +07:00 [INF] Content root path: C:\Users\This PC\source\repos\RestfulAPICRUDExample\RestfulAPICRUDExample\
2023-06-15 10:08:22.487 +07:00 [DBG] Hosting started
2023-06-15 10:08:22.930 +07:00 [DBG] Connection id "0HMRD9N3N7JK4" accepted.
2023-06-15 10:08:22.930 +07:00 [DBG] Connection id "0HMRD9N3N7JK5" accepted.
2023-06-15 10:08:22.941 +07:00 [DBG] Connection id "0HMRD9N3N7JK5" started.
2023-06-15 10:08:22.941 +07:00 [DBG] Connection id "0HMRD9N3N7JK4" started.
2023-06-15 10:08:22.945 +07:00 [DBG] Connection id "0HMRD9N3N7JK4" received FIN.
2023-06-15 10:08:22.945 +07:00 [DBG] Connection id "0HMRD9N3N7JK5" received FIN.
2023-06-15 10:08:22.984 +07:00 [DBG] Connection id "0HMRD9N3N7JK5" sending FIN because: "The client closed the connection."
2023-06-15 10:08:22.984 +07:00 [DBG] Connection id "0HMRD9N3N7JK4" sending FIN because: "The client closed the connection."
2023-06-15 10:08:22.986 +07:00 [DBG] Connection id "0HMRD9N3N7JK5" disconnecting.
2023-06-15 10:08:22.986 +07:00 [DBG] Connection id "0HMRD9N3N7JK4" disconnecting.
2023-06-15 10:08:22.992 +07:00 [DBG] Connection id "0HMRD9N3N7JK5" stopped.
2023-06-15 10:08:22.992 +07:00 [DBG] Connection id "0HMRD9N3N7JK4" stopped.
2023-06-15 10:08:23.416 +07:00 [DBG] Connection id "0HMRD9N3N7JK6" accepted.
2023-06-15 10:08:23.416 +07:00 [DBG] Connection id "0HMRD9N3N7JK6" started.
2023-06-15 10:08:23.417 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" accepted.
2023-06-15 10:08:23.417 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" started.
2023-06-15 10:08:23.496 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2023-06-15 10:08:23.540 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-06-15 10:08:23.570 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-06-15 10:08:23.571 +07:00 [DBG] Request did not match any endpoints
2023-06-15 10:08:23.697 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-06-15 10:08:23.860 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2023-06-15 10:08:23.868 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:08:23.870 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 9.6185ms
2023-06-15 10:08:23.887 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-06-15 10:08:23.888 +07:00 [DBG] Connection id "0HMRD9N3N7JK6" completed keep alive response.
2023-06-15 10:08:23.890 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_vs/browserLink - -
2023-06-15 10:08:23.891 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 400.2418ms
2023-06-15 10:08:23.930 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:08:23.931 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 40.8090ms
2023-06-15 10:08:24.013 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2023-06-15 10:08:24.013 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-06-15 10:08:24.013 +07:00 [DBG] Request did not match any endpoints
2023-06-15 10:08:24.238 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:08:24.238 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 225.3496ms
2023-06-15 10:08:37.278 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55
2023-06-15 10:08:37.287 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth/login'
2023-06-15 10:08:37.291 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth/login' is valid for the request path '/api/UsersAuth/login'
2023-06-15 10:08:37.291 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:08:37.293 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:08:37.402 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 10:08:37.402 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:08:37.429 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RestfulAPICRUDExample.Models.DTO.LoginRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 10:08:37.429 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 10:08:37.430 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 10:08:37.430 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 10:08:37.430 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 10:08:37.430 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 10:08:37.431 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 10:08:37.649 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 10:08:37.681 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 10:08:37.688 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 10:08:37.690 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' using the name '' in request data ...
2023-06-15 10:08:37.690 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 10:08:37.690 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 10:08:37.712 +07:00 [DBG] Connection id "0HMRD9N3N7JK7", Request id "0HMRD9N3N7JK7:00000005": started reading request body.
2023-06-15 10:08:37.713 +07:00 [DBG] Connection id "0HMRD9N3N7JK7", Request id "0HMRD9N3N7JK7:00000005": done reading request body.
2023-06-15 10:08:37.870 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:08:37.870 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:08:37.870 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 10:08:37.877 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:08:38.629 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 10:08:38.738 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName.ToLower() == __ToLower_0 && u.Password == __loginRequestDTO_Password_1)'
2023-06-15 10:08:39.175 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE (LOWER(l.UserName) == @__ToLower_0) && (l.Password == @__loginRequestDTO_Password_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 10:08:39.254 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 10:08:39.308 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (50ms).
2023-06-15 10:08:39.324 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:08:39.741 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:08:39.756 +07:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 10:08:39.822 +07:00 [INF] Executed DbCommand (74ms) [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 10:08:39.871 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 10:08:39.907 +07:00 [DBG] A data reader was disposed.
2023-06-15 10:08:39.911 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:08:39.921 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:08:40.037 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 10:08:40.039 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 10:08:40.039 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 10:08:40.039 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 10:08:40.040 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 10:08:40.040 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 10:08:40.109 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample) in 2673.7571ms
2023-06-15 10:08:40.110 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:08:40.110 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:08:40.115 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 10:08:40.121 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55 - 200 355 application/json;+charset=utf-8 2842.6225ms
2023-06-15 10:09:18.571 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:18.574 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:18.574 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:18.575 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:18.575 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:18.581 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:18.588 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:18.588 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:18.588 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 18.0313ms
2023-06-15 10:09:38.882 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:38.883 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:38.883 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:38.883 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:38.883 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:38.887 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:38.977 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:09:38.978 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:38.978 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:38.978 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 96.9585ms
2023-06-15 10:09:40.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:40.141 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:40.141 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:40.141 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:40.141 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:40.142 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:40.142 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:09:40.143 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:40.143 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:40.143 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 2.0058ms
2023-06-15 10:09:40.573 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:40.573 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:40.573 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:40.573 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:40.574 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:40.574 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:40.574 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:09:40.574 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:40.574 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:40.574 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.8442ms
2023-06-15 10:09:40.743 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:40.743 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:40.743 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:40.743 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:40.743 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:40.743 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:40.743 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:09:40.743 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:40.743 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:40.743 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.7176ms
2023-06-15 10:09:40.892 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:40.892 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:40.892 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:40.892 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:40.892 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:40.892 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:40.892 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:09:40.893 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:40.893 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:40.893 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.7827ms
2023-06-15 10:09:41.051 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:41.052 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:41.052 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:41.052 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:41.052 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:41.052 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:41.052 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:09:41.052 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:41.052 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:41.052 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.7451ms
2023-06-15 10:09:41.235 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:41.235 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:41.235 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:41.235 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:41.235 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:41.235 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:41.235 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:09:41.235 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:41.235 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:41.235 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.6205ms
2023-06-15 10:09:52.240 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:52.240 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:52.240 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:52.240 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:52.240 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:52.240 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:52.240 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:52.241 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:52.241 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.9243ms
2023-06-15 10:09:53.574 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:53.574 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:53.574 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:53.574 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:53.574 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:53.574 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:53.574 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:53.574 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:53.575 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.5317ms
2023-06-15 10:09:54.190 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:54.190 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:54.190 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:54.190 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:54.190 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:54.190 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:54.190 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:54.190 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:54.190 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.5045ms
2023-06-15 10:09:54.420 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:54.420 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:54.420 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:54.420 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:54.420 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:54.420 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:54.420 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:54.421 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:54.421 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.7430ms
2023-06-15 10:09:54.624 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:09:54.624 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:09:54.624 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:09:54.624 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:09:54.624 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:09:54.624 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 10:09:54.624 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:09:54.624 +07:00 [DBG] Connection id "0HMRD9N3N7JK7" completed keep alive response.
2023-06-15 10:09:54.624 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.8411ms
2023-06-15 10:10:21.856 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-06-15 10:10:21.983 +07:00 [DBG] Hosting starting
2023-06-15 10:10:22.034 +07:00 [INF] User profile is available. Using 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-15 10:10:22.056 +07:00 [DBG] Reading data from file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 10:10:22.064 +07:00 [DBG] Found key {2f4877b4-2456-4d34-a4e8-4b53811009c5}.
2023-06-15 10:10:22.073 +07:00 [DBG] Considering key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with expiration date 2023-09-13 02:55:11Z as default key.
2023-06-15 10:10:22.074 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 10:10:22.077 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-06-15 10:10:22.078 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 10:10:22.082 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-06-15 10:10:22.085 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-06-15 10:10:22.090 +07:00 [DBG] Using key {2f4877b4-2456-4d34-a4e8-4b53811009c5} as the default key.
2023-06-15 10:10:22.091 +07:00 [DBG] Key ring with default key {2f4877b4-2456-4d34-a4e8-4b53811009c5} was loaded during application startup.
2023-06-15 10:10:22.315 +07:00 [INF] Now listening on: http://localhost:5208
2023-06-15 10:10:22.315 +07:00 [DBG] Loaded hosting startup assembly RestfulAPICRUDExample
2023-06-15 10:10:22.315 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-06-15 10:10:22.315 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-06-15 10:10:22.315 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-15 10:10:22.315 +07:00 [INF] Hosting environment: Development
2023-06-15 10:10:22.315 +07:00 [INF] Content root path: C:\Users\This PC\source\repos\RestfulAPICRUDExample\RestfulAPICRUDExample\
2023-06-15 10:10:22.315 +07:00 [DBG] Hosting started
2023-06-15 10:10:22.612 +07:00 [DBG] Connection id "0HMRD9O7CM16F" received FIN.
2023-06-15 10:10:22.612 +07:00 [DBG] Connection id "0HMRD9O7CM16G" received FIN.
2023-06-15 10:10:22.636 +07:00 [DBG] Connection id "0HMRD9O7CM16G" accepted.
2023-06-15 10:10:22.636 +07:00 [DBG] Connection id "0HMRD9O7CM16F" accepted.
2023-06-15 10:10:22.639 +07:00 [DBG] Connection id "0HMRD9O7CM16G" started.
2023-06-15 10:10:22.639 +07:00 [DBG] Connection id "0HMRD9O7CM16F" started.
2023-06-15 10:10:22.657 +07:00 [DBG] Connection id "0HMRD9O7CM16G" sending FIN because: "The client closed the connection."
2023-06-15 10:10:22.657 +07:00 [DBG] Connection id "0HMRD9O7CM16F" sending FIN because: "The client closed the connection."
2023-06-15 10:10:22.662 +07:00 [DBG] Connection id "0HMRD9O7CM16G" disconnecting.
2023-06-15 10:10:22.662 +07:00 [DBG] Connection id "0HMRD9O7CM16F" disconnecting.
2023-06-15 10:10:22.699 +07:00 [DBG] Connection id "0HMRD9O7CM16F" stopped.
2023-06-15 10:10:22.699 +07:00 [DBG] Connection id "0HMRD9O7CM16G" stopped.
2023-06-15 10:10:22.973 +07:00 [DBG] Connection id "0HMRD9O7CM16H" accepted.
2023-06-15 10:10:22.973 +07:00 [DBG] Connection id "0HMRD9O7CM16H" started.
2023-06-15 10:10:22.974 +07:00 [DBG] Connection id "0HMRD9O7CM16I" accepted.
2023-06-15 10:10:22.976 +07:00 [DBG] Connection id "0HMRD9O7CM16I" started.
2023-06-15 10:10:23.095 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2023-06-15 10:10:23.143 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-06-15 10:10:23.165 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-06-15 10:10:23.165 +07:00 [DBG] Request did not match any endpoints
2023-06-15 10:10:23.293 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-06-15 10:10:23.446 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-06-15 10:10:23.446 +07:00 [DBG] Connection id "0HMRD9O7CM16I" completed keep alive response.
2023-06-15 10:10:23.450 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 359.7810ms
2023-06-15 10:10:23.457 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_vs/browserLink - -
2023-06-15 10:10:23.466 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2023-06-15 10:10:23.476 +07:00 [DBG] Connection id "0HMRD9O7CM16I" completed keep alive response.
2023-06-15 10:10:23.476 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 9.7006ms
2023-06-15 10:10:23.506 +07:00 [DBG] Connection id "0HMRD9O7CM16H" completed keep alive response.
2023-06-15 10:10:23.506 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 48.8454ms
2023-06-15 10:10:23.596 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2023-06-15 10:10:23.597 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-06-15 10:10:23.597 +07:00 [DBG] Request did not match any endpoints
2023-06-15 10:10:23.813 +07:00 [DBG] Connection id "0HMRD9O7CM16H" completed keep alive response.
2023-06-15 10:10:23.813 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 216.9930ms
2023-06-15 10:10:36.910 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55
2023-06-15 10:10:36.921 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth/login'
2023-06-15 10:10:36.927 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth/login' is valid for the request path '/api/UsersAuth/login'
2023-06-15 10:10:36.927 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:10:36.929 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:10:37.013 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 10:10:37.014 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:10:37.042 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RestfulAPICRUDExample.Models.DTO.LoginRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 10:10:37.042 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 10:10:37.042 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 10:10:37.042 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 10:10:37.042 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 10:10:37.042 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 10:10:37.043 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 10:10:37.212 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 10:10:37.242 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 10:10:37.246 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 10:10:37.248 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' using the name '' in request data ...
2023-06-15 10:10:37.248 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 10:10:37.248 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 10:10:37.263 +07:00 [DBG] Connection id "0HMRD9O7CM16H", Request id "0HMRD9O7CM16H:00000004": started reading request body.
2023-06-15 10:10:37.264 +07:00 [DBG] Connection id "0HMRD9O7CM16H", Request id "0HMRD9O7CM16H:00000004": done reading request body.
2023-06-15 10:10:37.380 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:10:37.380 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:10:37.380 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 10:10:37.387 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:10:38.027 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 10:10:38.118 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName.ToLower() == __ToLower_0 && u.Password == __loginRequestDTO_Password_1)'
2023-06-15 10:10:38.524 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE (LOWER(l.UserName) == @__ToLower_0) && (l.Password == @__loginRequestDTO_Password_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 10:10:38.586 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 10:10:38.631 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (42ms).
2023-06-15 10:10:38.644 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:10:39.010 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:10:39.026 +07:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 10:10:39.109 +07:00 [INF] Executed DbCommand (86ms) [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 10:10:39.150 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 10:10:39.184 +07:00 [DBG] A data reader was disposed.
2023-06-15 10:10:39.188 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:10:39.197 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:10:39.323 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 10:10:39.325 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 10:10:39.325 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 10:10:39.325 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 10:10:39.326 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 10:10:39.326 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 10:10:39.392 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample) in 2344.5666ms
2023-06-15 10:10:39.393 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:10:39.393 +07:00 [DBG] Connection id "0HMRD9O7CM16H" completed keep alive response.
2023-06-15 10:10:39.397 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 10:10:39.402 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55 - 200 355 application/json;+charset=utf-8 2491.7417ms
2023-06-15 10:11:05.724 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:11:05.730 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:11:05.730 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:11:05.730 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:11:05.730 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:11:05.737 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:11:05.744 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:11:05.744 +07:00 [DBG] Connection id "0HMRD9O7CM16H" completed keep alive response.
2023-06-15 10:11:05.744 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 21.4836ms
2023-06-15 10:11:15.744 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:11:15.744 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:11:15.744 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:11:15.744 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:11:15.744 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:11:15.745 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:11:15.747 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:11:15.747 +07:00 [DBG] Connection id "0HMRD9O7CM16H" completed keep alive response.
2023-06-15 10:11:15.747 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 3.0836ms
2023-06-15 10:11:16.606 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:11:16.606 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:11:16.606 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:11:16.606 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:11:16.606 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:11:16.607 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:11:16.607 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:11:16.607 +07:00 [DBG] Connection id "0HMRD9O7CM16H" completed keep alive response.
2023-06-15 10:11:16.607 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.9534ms
2023-06-15 10:11:16.797 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:11:16.797 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:11:16.797 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:11:16.797 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:11:16.797 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:11:16.797 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:11:16.797 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:11:16.797 +07:00 [DBG] Connection id "0HMRD9O7CM16H" completed keep alive response.
2023-06-15 10:11:16.797 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.5547ms
2023-06-15 10:11:16.974 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:11:16.974 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:11:16.974 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:11:16.974 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:11:16.974 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:11:16.974 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:11:16.974 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:11:16.974 +07:00 [DBG] Connection id "0HMRD9O7CM16H" completed keep alive response.
2023-06-15 10:11:16.975 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.5736ms
2023-06-15 10:11:17.159 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:11:17.159 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:11:17.159 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:11:17.159 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:11:17.160 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:11:17.160 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:11:17.160 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:11:17.160 +07:00 [DBG] Connection id "0HMRD9O7CM16H" completed keep alive response.
2023-06-15 10:11:17.160 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.8263ms
2023-06-15 10:12:06.958 +07:00 [DBG] Connection id "0HMRD9O7CM16I" received FIN.
2023-06-15 10:12:06.961 +07:00 [DBG] Connection id "0HMRD9O7CM16H" received FIN.
2023-06-15 10:12:06.976 +07:00 [DBG] Connection id "0HMRD9O7CM16I" sending FIN because: "The client closed the connection."
2023-06-15 10:12:06.982 +07:00 [DBG] Connection id "0HMRD9O7CM16H" sending FIN because: "The client closed the connection."
2023-06-15 10:12:06.982 +07:00 [DBG] Connection id "0HMRD9O7CM16I" disconnecting.
2023-06-15 10:12:06.983 +07:00 [DBG] Connection id "0HMRD9O7CM16H" disconnecting.
2023-06-15 10:12:06.996 +07:00 [DBG] Connection id "0HMRD9O7CM16I" stopped.
2023-06-15 10:12:06.996 +07:00 [DBG] Connection id "0HMRD9O7CM16H" stopped.
2023-06-15 10:14:53.105 +07:00 [DBG] Connection id "0HMRD9O7CM16J" accepted.
2023-06-15 10:14:53.106 +07:00 [DBG] Connection id "0HMRD9O7CM16J" started.
2023-06-15 10:14:53.114 +07:00 [DBG] Connection id "0HMRD9O7CM16K" accepted.
2023-06-15 10:14:53.125 +07:00 [DBG] Connection id "0HMRD9O7CM16J" received FIN.
2023-06-15 10:14:53.140 +07:00 [DBG] Connection id "0HMRD9O7CM16K" started.
2023-06-15 10:14:53.146 +07:00 [DBG] Connection id "0HMRD9O7CM16J" disconnecting.
2023-06-15 10:14:53.146 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:14:53.149 +07:00 [DBG] Connection id "0HMRD9O7CM16J" stopped.
2023-06-15 10:14:53.149 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:14:53.154 +07:00 [DBG] Connection id "0HMRD9O7CM16J" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-06-15 10:14:53.154 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:14:53.157 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:14:53.158 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:14:53.160 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:14:53.160 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:14:53.160 +07:00 [DBG] Connection id "0HMRD9O7CM16K" completed keep alive response.
2023-06-15 10:14:53.161 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 16.4562ms
2023-06-15 10:15:36.230 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:15:36.231 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:15:36.234 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:15:36.235 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:15:36.240 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:15:36.241 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:15:36.325 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:15:36.326 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:15:36.326 +07:00 [DBG] Connection id "0HMRD9O7CM16K" completed keep alive response.
2023-06-15 10:15:36.326 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 95.3568ms
2023-06-15 10:16:51.712 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:16:51.712 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:16:51.712 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:16:51.712 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:16:51.712 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:16:51.712 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:16:51.721 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenNoExpirationException: IDX10225: Lifetime validation failed. The token is missing an Expiration Time. Tokentype: 'System.String'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-15 10:16:51.792 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:16:51.792 +07:00 [DBG] Connection id "0HMRD9O7CM16K" completed keep alive response.
2023-06-15 10:16:51.792 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 81.5189ms
2023-06-15 10:17:06.530 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:17:06.530 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:17:06.530 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:17:06.530 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:17:06.530 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:17:06.530 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:17:06.531 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:17:06.531 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:17:06.531 +07:00 [DBG] Connection id "0HMRD9O7CM16K" completed keep alive response.
2023-06-15 10:17:06.531 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 0.5997ms
2023-06-15 10:23:12.009 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-06-15 10:23:12.283 +07:00 [DBG] Hosting starting
2023-06-15 10:23:12.342 +07:00 [INF] User profile is available. Using 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-15 10:23:12.387 +07:00 [DBG] Reading data from file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 10:23:12.411 +07:00 [DBG] Found key {2f4877b4-2456-4d34-a4e8-4b53811009c5}.
2023-06-15 10:23:12.427 +07:00 [DBG] Considering key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with expiration date 2023-09-13 02:55:11Z as default key.
2023-06-15 10:23:12.430 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 10:23:12.433 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-06-15 10:23:12.435 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 10:23:12.439 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-06-15 10:23:12.441 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-06-15 10:23:12.444 +07:00 [DBG] Using key {2f4877b4-2456-4d34-a4e8-4b53811009c5} as the default key.
2023-06-15 10:23:12.445 +07:00 [DBG] Key ring with default key {2f4877b4-2456-4d34-a4e8-4b53811009c5} was loaded during application startup.
2023-06-15 10:23:12.632 +07:00 [INF] Now listening on: http://localhost:5208
2023-06-15 10:23:12.632 +07:00 [DBG] Loaded hosting startup assembly RestfulAPICRUDExample
2023-06-15 10:23:12.632 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-06-15 10:23:12.632 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-06-15 10:23:12.632 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-15 10:23:12.632 +07:00 [INF] Hosting environment: Development
2023-06-15 10:23:12.632 +07:00 [INF] Content root path: C:\Users\This PC\source\repos\RestfulAPICRUDExample\RestfulAPICRUDExample\
2023-06-15 10:23:12.632 +07:00 [DBG] Hosting started
2023-06-15 10:23:12.694 +07:00 [DBG] Connection id "0HMRD9VCSOGPU" received FIN.
2023-06-15 10:23:12.694 +07:00 [DBG] Connection id "0HMRD9VCSOGPT" received FIN.
2023-06-15 10:23:12.714 +07:00 [DBG] Connection id "0HMRD9VCSOGPU" accepted.
2023-06-15 10:23:12.714 +07:00 [DBG] Connection id "0HMRD9VCSOGPT" accepted.
2023-06-15 10:23:12.716 +07:00 [DBG] Connection id "0HMRD9VCSOGPU" started.
2023-06-15 10:23:12.716 +07:00 [DBG] Connection id "0HMRD9VCSOGPT" started.
2023-06-15 10:23:12.732 +07:00 [DBG] Connection id "0HMRD9VCSOGPU" sending FIN because: "The client closed the connection."
2023-06-15 10:23:12.732 +07:00 [DBG] Connection id "0HMRD9VCSOGPT" sending FIN because: "The client closed the connection."
2023-06-15 10:23:12.735 +07:00 [DBG] Connection id "0HMRD9VCSOGPT" disconnecting.
2023-06-15 10:23:12.735 +07:00 [DBG] Connection id "0HMRD9VCSOGPU" disconnecting.
2023-06-15 10:23:12.743 +07:00 [DBG] Connection id "0HMRD9VCSOGPT" stopped.
2023-06-15 10:23:12.743 +07:00 [DBG] Connection id "0HMRD9VCSOGPU" stopped.
2023-06-15 10:23:13.432 +07:00 [DBG] Connection id "0HMRD9VCSOGPV" accepted.
2023-06-15 10:23:13.437 +07:00 [DBG] Connection id "0HMRD9VCSOGPV" started.
2023-06-15 10:23:13.445 +07:00 [DBG] Connection id "0HMRD9VCSOGQ0" accepted.
2023-06-15 10:23:13.445 +07:00 [DBG] Connection id "0HMRD9VCSOGQ0" started.
2023-06-15 10:23:13.521 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2023-06-15 10:23:13.577 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-06-15 10:23:13.608 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-06-15 10:23:13.609 +07:00 [DBG] Request did not match any endpoints
2023-06-15 10:23:13.766 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-06-15 10:23:13.974 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-06-15 10:23:13.975 +07:00 [DBG] Connection id "0HMRD9VCSOGPV" completed keep alive response.
2023-06-15 10:23:13.983 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 463.9422ms
2023-06-15 10:23:14.007 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_vs/browserLink - -
2023-06-15 10:23:14.010 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2023-06-15 10:23:14.019 +07:00 [DBG] Connection id "0HMRD9VCSOGPV" completed keep alive response.
2023-06-15 10:23:14.021 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 8.5779ms
2023-06-15 10:23:14.130 +07:00 [DBG] Connection id "0HMRD9VCSOGQ0" completed keep alive response.
2023-06-15 10:23:14.130 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 122.9874ms
2023-06-15 10:23:14.210 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2023-06-15 10:23:14.210 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-06-15 10:23:14.210 +07:00 [DBG] Request did not match any endpoints
2023-06-15 10:23:14.482 +07:00 [DBG] Connection id "0HMRD9VCSOGQ0" completed keep alive response.
2023-06-15 10:23:14.483 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 272.7485ms
2023-06-15 10:23:17.960 +07:00 [DBG] Connection id "0HMRD9VCSOGPV" received FIN.
2023-06-15 10:23:17.960 +07:00 [DBG] Connection id "0HMRD9VCSOGQ0" received FIN.
2023-06-15 10:23:17.960 +07:00 [DBG] Connection id "0HMRD9VCSOGQ0" sending FIN because: "The client closed the connection."
2023-06-15 10:23:17.960 +07:00 [DBG] Connection id "0HMRD9VCSOGPV" sending FIN because: "The client closed the connection."
2023-06-15 10:23:17.961 +07:00 [DBG] Connection id "0HMRD9VCSOGPV" disconnecting.
2023-06-15 10:23:17.961 +07:00 [DBG] Connection id "0HMRD9VCSOGQ0" disconnecting.
2023-06-15 10:23:17.976 +07:00 [DBG] Connection id "0HMRD9VCSOGPV" stopped.
2023-06-15 10:23:17.976 +07:00 [DBG] Connection id "0HMRD9VCSOGQ0" stopped.
2023-06-15 10:23:25.540 +07:00 [DBG] Connection id "0HMRD9VCSOGQ1" accepted.
2023-06-15 10:23:25.540 +07:00 [DBG] Connection id "0HMRD9VCSOGQ1" started.
2023-06-15 10:23:25.541 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55
2023-06-15 10:23:25.552 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth/login'
2023-06-15 10:23:25.558 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth/login' is valid for the request path '/api/UsersAuth/login'
2023-06-15 10:23:25.559 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:23:25.561 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:23:25.681 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 10:23:25.682 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:23:25.756 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RestfulAPICRUDExample.Models.DTO.LoginRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 10:23:25.757 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 10:23:25.757 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 10:23:25.757 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 10:23:25.757 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 10:23:25.758 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 10:23:25.761 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 10:23:25.999 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 10:23:26.032 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 10:23:26.038 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 10:23:26.039 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' using the name '' in request data ...
2023-06-15 10:23:26.040 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 10:23:26.040 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 10:23:26.063 +07:00 [DBG] Connection id "0HMRD9VCSOGQ1", Request id "0HMRD9VCSOGQ1:00000002": started reading request body.
2023-06-15 10:23:26.063 +07:00 [DBG] Connection id "0HMRD9VCSOGQ1", Request id "0HMRD9VCSOGQ1:00000002": done reading request body.
2023-06-15 10:23:26.205 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:23:26.205 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:23:26.205 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 10:23:26.213 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 10:23:26.978 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 10:23:27.089 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName.ToLower() == __ToLower_0 && u.Password == __loginRequestDTO_Password_1)'
2023-06-15 10:23:27.577 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE (LOWER(l.UserName) == @__ToLower_0) && (l.Password == @__loginRequestDTO_Password_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 10:23:27.653 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 10:23:27.713 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (55ms).
2023-06-15 10:23:27.729 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:23:28.190 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:23:28.207 +07:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 10:23:28.349 +07:00 [INF] Executed DbCommand (146ms) [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 10:23:28.402 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 10:23:28.447 +07:00 [DBG] A data reader was disposed.
2023-06-15 10:23:28.453 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:23:28.470 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 10:23:28.626 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 10:23:28.630 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 10:23:28.630 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 10:23:28.630 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 10:23:28.631 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 10:23:28.631 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 10:23:28.716 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample) in 2952.9849ms
2023-06-15 10:23:28.717 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 10:23:28.717 +07:00 [DBG] Connection id "0HMRD9VCSOGQ1" completed keep alive response.
2023-06-15 10:23:28.722 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 10:23:28.728 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55 - 200 355 application/json;+charset=utf-8 3187.1993ms
2023-06-15 10:23:37.990 +07:00 [DBG] Connection id "0HMRD9VCSOGQ1" received FIN.
2023-06-15 10:23:37.990 +07:00 [DBG] Connection id "0HMRD9VCSOGQ1" sending FIN because: "The client closed the connection."
2023-06-15 10:23:37.991 +07:00 [DBG] Connection id "0HMRD9VCSOGQ1" disconnecting.
2023-06-15 10:23:37.991 +07:00 [DBG] Connection id "0HMRD9VCSOGQ1" stopped.
2023-06-15 10:24:08.564 +07:00 [DBG] Connection id "0HMRD9VCSOGQ2" accepted.
2023-06-15 10:24:08.574 +07:00 [DBG] Connection id "0HMRD9VCSOGQ2" started.
2023-06-15 10:24:08.576 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 10:24:08.585 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 10:24:08.585 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 10:24:08.585 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 10:24:08.586 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 10:24:08.624 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 10:24:08.757 +07:00 [DBG] Successfully validated the token.
2023-06-15 10:24:08.759 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 10:24:08.759 +07:00 [DBG] Connection id "0HMRD9VCSOGQ2" completed keep alive response.
2023-06-15 10:24:08.759 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 182.7316ms
2023-06-15 10:24:13.049 +07:00 [DBG] Connection id "0HMRD9VCSOGQ2" received FIN.
2023-06-15 10:24:13.049 +07:00 [DBG] Connection id "0HMRD9VCSOGQ2" sending FIN because: "The client closed the connection."
2023-06-15 10:24:13.050 +07:00 [DBG] Connection id "0HMRD9VCSOGQ2" disconnecting.
2023-06-15 10:24:13.050 +07:00 [DBG] Connection id "0HMRD9VCSOGQ2" stopped.
2023-06-15 13:15:30.704 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-06-15 13:15:30.804 +07:00 [DBG] Hosting starting
2023-06-15 13:15:30.857 +07:00 [INF] User profile is available. Using 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-15 13:15:30.907 +07:00 [DBG] Reading data from file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 13:15:30.928 +07:00 [DBG] Found key {2f4877b4-2456-4d34-a4e8-4b53811009c5}.
2023-06-15 13:15:30.947 +07:00 [DBG] Considering key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with expiration date 2023-09-13 02:55:11Z as default key.
2023-06-15 13:15:30.950 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 13:15:30.955 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-06-15 13:15:30.957 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 13:15:30.963 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-06-15 13:15:30.967 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-06-15 13:15:30.972 +07:00 [DBG] Using key {2f4877b4-2456-4d34-a4e8-4b53811009c5} as the default key.
2023-06-15 13:15:30.973 +07:00 [DBG] Key ring with default key {2f4877b4-2456-4d34-a4e8-4b53811009c5} was loaded during application startup.
2023-06-15 13:15:31.180 +07:00 [INF] Now listening on: http://localhost:5208
2023-06-15 13:15:31.180 +07:00 [DBG] Loaded hosting startup assembly RestfulAPICRUDExample
2023-06-15 13:15:31.180 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-06-15 13:15:31.180 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-06-15 13:15:31.181 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-15 13:15:31.181 +07:00 [INF] Hosting environment: Development
2023-06-15 13:15:31.181 +07:00 [INF] Content root path: C:\Users\This PC\source\repos\RestfulAPICRUDExample\RestfulAPICRUDExample\
2023-06-15 13:15:31.181 +07:00 [DBG] Hosting started
2023-06-15 13:15:31.607 +07:00 [DBG] Connection id "0HMRDCVM49G6G" accepted.
2023-06-15 13:15:31.608 +07:00 [DBG] Connection id "0HMRDCVM49G6G" started.
2023-06-15 13:15:31.617 +07:00 [DBG] Connection id "0HMRDCVM49G6G" received FIN.
2023-06-15 13:15:31.621 +07:00 [DBG] Connection id "0HMRDCVM49G6G" sending FIN because: "The client closed the connection."
2023-06-15 13:15:31.623 +07:00 [DBG] Connection id "0HMRDCVM49G6G" disconnecting.
2023-06-15 13:15:31.630 +07:00 [DBG] Connection id "0HMRDCVM49G6G" stopped.
2023-06-15 13:15:32.486 +07:00 [DBG] Connection id "0HMRDCVM49G6H" accepted.
2023-06-15 13:15:32.486 +07:00 [DBG] Connection id "0HMRDCVM49G6H" started.
2023-06-15 13:15:32.487 +07:00 [DBG] Connection id "0HMRDCVM49G6I" accepted.
2023-06-15 13:15:32.488 +07:00 [DBG] Connection id "0HMRDCVM49G6I" started.
2023-06-15 13:15:32.616 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2023-06-15 13:15:32.691 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-06-15 13:15:32.746 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-06-15 13:15:32.747 +07:00 [DBG] Request did not match any endpoints
2023-06-15 13:15:32.969 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-06-15 13:15:33.309 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-06-15 13:15:33.316 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2023-06-15 13:15:33.316 +07:00 [DBG] Connection id "0HMRDCVM49G6H" completed keep alive response.
2023-06-15 13:15:33.320 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 712.0873ms
2023-06-15 13:15:33.322 +07:00 [DBG] Connection id "0HMRDCVM49G6I" completed keep alive response.
2023-06-15 13:15:33.322 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 6.6569ms
2023-06-15 13:15:33.361 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_vs/browserLink - -
2023-06-15 13:15:33.524 +07:00 [DBG] Connection id "0HMRDCVM49G6I" completed keep alive response.
2023-06-15 13:15:33.524 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 163.4337ms
2023-06-15 13:15:33.600 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2023-06-15 13:15:33.601 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-06-15 13:15:33.601 +07:00 [DBG] Request did not match any endpoints
2023-06-15 13:15:33.944 +07:00 [DBG] Connection id "0HMRDCVM49G6I" completed keep alive response.
2023-06-15 13:15:33.944 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 343.3850ms
2023-06-15 13:15:36.601 +07:00 [DBG] Connection id "0HMRDCVM49G6H" received FIN.
2023-06-15 13:15:36.601 +07:00 [DBG] Connection id "0HMRDCVM49G6I" received FIN.
2023-06-15 13:15:36.604 +07:00 [DBG] Connection id "0HMRDCVM49G6I" sending FIN because: "The client closed the connection."
2023-06-15 13:15:36.604 +07:00 [DBG] Connection id "0HMRDCVM49G6H" sending FIN because: "The client closed the connection."
2023-06-15 13:15:36.607 +07:00 [DBG] Connection id "0HMRDCVM49G6I" disconnecting.
2023-06-15 13:15:36.608 +07:00 [DBG] Connection id "0HMRDCVM49G6H" disconnecting.
2023-06-15 13:15:36.622 +07:00 [DBG] Connection id "0HMRDCVM49G6I" stopped.
2023-06-15 13:15:36.622 +07:00 [DBG] Connection id "0HMRDCVM49G6H" stopped.
2023-06-15 13:15:46.959 +07:00 [DBG] Connection id "0HMRDCVM49G6J" accepted.
2023-06-15 13:15:46.959 +07:00 [DBG] Connection id "0HMRDCVM49G6J" started.
2023-06-15 13:15:46.960 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55
2023-06-15 13:15:46.970 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth/login'
2023-06-15 13:15:46.974 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth/login' is valid for the request path '/api/UsersAuth/login'
2023-06-15 13:15:46.974 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:15:46.976 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:15:47.091 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 13:15:47.092 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:15:47.138 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RestfulAPICRUDExample.Models.DTO.LoginRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 13:15:47.139 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 13:15:47.139 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 13:15:47.139 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 13:15:47.139 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 13:15:47.139 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 13:15:47.141 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 13:15:47.370 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 13:15:47.403 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 13:15:47.409 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 13:15:47.411 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' using the name '' in request data ...
2023-06-15 13:15:47.411 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 13:15:47.412 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 13:15:47.438 +07:00 [DBG] Connection id "0HMRDCVM49G6J", Request id "0HMRDCVM49G6J:00000002": started reading request body.
2023-06-15 13:15:47.439 +07:00 [DBG] Connection id "0HMRDCVM49G6J", Request id "0HMRDCVM49G6J:00000002": done reading request body.
2023-06-15 13:15:47.593 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:15:47.593 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:15:47.593 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 13:15:47.630 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:15:48.408 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 13:15:48.525 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName.ToLower() == __ToLower_0 && u.Password == __loginRequestDTO_Password_1)'
2023-06-15 13:15:48.992 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE (LOWER(l.UserName) == @__ToLower_0) && (l.Password == @__loginRequestDTO_Password_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 13:15:49.056 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 13:15:49.109 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (50ms).
2023-06-15 13:15:49.128 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:15:49.580 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:15:49.597 +07:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 13:15:49.706 +07:00 [INF] Executed DbCommand (115ms) [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 13:15:49.746 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 13:15:49.794 +07:00 [DBG] A data reader was disposed.
2023-06-15 13:15:49.798 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:15:49.811 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:15:49.939 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 13:15:49.940 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 13:15:49.941 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 13:15:49.941 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 13:15:49.941 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 13:15:49.941 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 13:15:50.011 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample) in 2866.8414ms
2023-06-15 13:15:50.012 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:15:50.012 +07:00 [DBG] Connection id "0HMRDCVM49G6J" completed keep alive response.
2023-06-15 13:15:50.017 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 13:15:50.022 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55 - 200 355 application/json;+charset=utf-8 3061.9674ms
2023-06-15 13:15:56.640 +07:00 [DBG] Connection id "0HMRDCVM49G6J" received FIN.
2023-06-15 13:15:56.640 +07:00 [DBG] Connection id "0HMRDCVM49G6J" sending FIN because: "The client closed the connection."
2023-06-15 13:15:56.640 +07:00 [DBG] Connection id "0HMRDCVM49G6J" disconnecting.
2023-06-15 13:15:56.640 +07:00 [DBG] Connection id "0HMRDCVM49G6J" stopped.
2023-06-15 13:15:58.985 +07:00 [DBG] Connection id "0HMRDCVM49G6K" accepted.
2023-06-15 13:15:58.986 +07:00 [DBG] Connection id "0HMRDCVM49G6K" started.
2023-06-15 13:15:58.986 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 13:15:58.988 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 13:15:58.988 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 13:15:58.988 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 13:15:58.988 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:15:59.001 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 13:15:59.010 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 13:15:59.010 +07:00 [DBG] Connection id "0HMRDCVM49G6K" completed keep alive response.
2023-06-15 13:15:59.010 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 23.8547ms
2023-06-15 13:16:04.584 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 13:16:04.584 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 13:16:04.584 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 13:16:04.584 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 13:16:04.585 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:16:04.585 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 13:16:04.669 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10206: Unable to validate audience. The 'audiences' parameter is empty.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2023-06-15 13:16:04.731 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 13:16:04.731 +07:00 [DBG] Connection id "0HMRDCVM49G6K" completed keep alive response.
2023-06-15 13:16:04.731 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 147.4276ms
2023-06-15 13:16:06.647 +07:00 [DBG] Connection id "0HMRDCVM49G6K" received FIN.
2023-06-15 13:16:06.647 +07:00 [DBG] Connection id "0HMRDCVM49G6K" sending FIN because: "The client closed the connection."
2023-06-15 13:16:06.647 +07:00 [DBG] Connection id "0HMRDCVM49G6K" disconnecting.
2023-06-15 13:16:06.648 +07:00 [DBG] Connection id "0HMRDCVM49G6K" stopped.
2023-06-15 13:21:33.794 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-06-15 13:21:33.914 +07:00 [DBG] Hosting starting
2023-06-15 13:21:33.999 +07:00 [INF] User profile is available. Using 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-15 13:21:34.041 +07:00 [DBG] Reading data from file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 13:21:34.068 +07:00 [DBG] Found key {2f4877b4-2456-4d34-a4e8-4b53811009c5}.
2023-06-15 13:21:34.083 +07:00 [DBG] Considering key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with expiration date 2023-09-13 02:55:11Z as default key.
2023-06-15 13:21:34.087 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 13:21:34.090 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-06-15 13:21:34.092 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 13:21:34.096 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-06-15 13:21:34.098 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-06-15 13:21:34.102 +07:00 [DBG] Using key {2f4877b4-2456-4d34-a4e8-4b53811009c5} as the default key.
2023-06-15 13:21:34.103 +07:00 [DBG] Key ring with default key {2f4877b4-2456-4d34-a4e8-4b53811009c5} was loaded during application startup.
2023-06-15 13:21:34.301 +07:00 [INF] Now listening on: http://localhost:5208
2023-06-15 13:21:34.301 +07:00 [DBG] Loaded hosting startup assembly RestfulAPICRUDExample
2023-06-15 13:21:34.301 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-06-15 13:21:34.301 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-06-15 13:21:34.301 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-15 13:21:34.301 +07:00 [INF] Hosting environment: Development
2023-06-15 13:21:34.301 +07:00 [INF] Content root path: C:\Users\This PC\source\repos\RestfulAPICRUDExample\RestfulAPICRUDExample\
2023-06-15 13:21:34.301 +07:00 [DBG] Hosting started
2023-06-15 13:21:34.418 +07:00 [DBG] Connection id "0HMRDD328A8IP" accepted.
2023-06-15 13:21:34.418 +07:00 [DBG] Connection id "0HMRDD328A8IO" accepted.
2023-06-15 13:21:34.420 +07:00 [DBG] Connection id "0HMRDD328A8IP" started.
2023-06-15 13:21:34.420 +07:00 [DBG] Connection id "0HMRDD328A8IO" started.
2023-06-15 13:21:34.446 +07:00 [DBG] Connection id "0HMRDD328A8IP" received FIN.
2023-06-15 13:21:34.446 +07:00 [DBG] Connection id "0HMRDD328A8IO" received FIN.
2023-06-15 13:21:34.461 +07:00 [DBG] Connection id "0HMRDD328A8IO" sending FIN because: "The client closed the connection."
2023-06-15 13:21:34.461 +07:00 [DBG] Connection id "0HMRDD328A8IP" sending FIN because: "The client closed the connection."
2023-06-15 13:21:34.463 +07:00 [DBG] Connection id "0HMRDD328A8IO" disconnecting.
2023-06-15 13:21:34.463 +07:00 [DBG] Connection id "0HMRDD328A8IP" disconnecting.
2023-06-15 13:21:34.468 +07:00 [DBG] Connection id "0HMRDD328A8IP" stopped.
2023-06-15 13:21:34.468 +07:00 [DBG] Connection id "0HMRDD328A8IO" stopped.
2023-06-15 13:21:35.068 +07:00 [DBG] Connection id "0HMRDD328A8IQ" accepted.
2023-06-15 13:21:35.069 +07:00 [DBG] Connection id "0HMRDD328A8IQ" started.
2023-06-15 13:21:35.070 +07:00 [DBG] Connection id "0HMRDD328A8IR" accepted.
2023-06-15 13:21:35.070 +07:00 [DBG] Connection id "0HMRDD328A8IR" started.
2023-06-15 13:21:35.162 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2023-06-15 13:21:35.240 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-06-15 13:21:35.275 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-06-15 13:21:35.276 +07:00 [DBG] Request did not match any endpoints
2023-06-15 13:21:35.470 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-06-15 13:21:35.646 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2023-06-15 13:21:35.653 +07:00 [DBG] Connection id "0HMRDD328A8IR" completed keep alive response.
2023-06-15 13:21:35.656 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 7.6894ms
2023-06-15 13:21:35.671 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-06-15 13:21:35.672 +07:00 [DBG] Connection id "0HMRDD328A8IQ" completed keep alive response.
2023-06-15 13:21:35.673 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_vs/browserLink - -
2023-06-15 13:21:35.674 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 523.7794ms
2023-06-15 13:21:35.711 +07:00 [DBG] Connection id "0HMRDD328A8IR" completed keep alive response.
2023-06-15 13:21:35.711 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 38.2204ms
2023-06-15 13:21:35.793 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2023-06-15 13:21:35.793 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-06-15 13:21:35.793 +07:00 [DBG] Request did not match any endpoints
2023-06-15 13:21:36.230 +07:00 [DBG] Connection id "0HMRDD328A8IR" completed keep alive response.
2023-06-15 13:21:36.230 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 436.7971ms
2023-06-15 13:21:42.152 +07:00 [DBG] Connection id "0HMRDD328A8IQ" received FIN.
2023-06-15 13:21:42.152 +07:00 [DBG] Connection id "0HMRDD328A8IR" received FIN.
2023-06-15 13:21:42.152 +07:00 [DBG] Connection id "0HMRDD328A8IR" sending FIN because: "The client closed the connection."
2023-06-15 13:21:42.152 +07:00 [DBG] Connection id "0HMRDD328A8IQ" sending FIN because: "The client closed the connection."
2023-06-15 13:21:42.152 +07:00 [DBG] Connection id "0HMRDD328A8IR" disconnecting.
2023-06-15 13:21:42.152 +07:00 [DBG] Connection id "0HMRDD328A8IQ" disconnecting.
2023-06-15 13:21:42.157 +07:00 [DBG] Connection id "0HMRDD328A8IQ" stopped.
2023-06-15 13:21:42.160 +07:00 [DBG] Connection id "0HMRDD328A8IR" stopped.
2023-06-15 13:21:50.573 +07:00 [DBG] Connection id "0HMRDD328A8IS" accepted.
2023-06-15 13:21:50.573 +07:00 [DBG] Connection id "0HMRDD328A8IS" started.
2023-06-15 13:21:50.577 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55
2023-06-15 13:21:50.587 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth/login'
2023-06-15 13:21:50.591 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth/login' is valid for the request path '/api/UsersAuth/login'
2023-06-15 13:21:50.591 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:21:50.592 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:21:50.722 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 13:21:50.723 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:21:50.776 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RestfulAPICRUDExample.Models.DTO.LoginRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 13:21:50.776 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 13:21:50.777 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 13:21:50.777 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 13:21:50.777 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 13:21:50.777 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 13:21:50.778 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 13:21:51.060 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 13:21:51.100 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 13:21:51.107 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 13:21:51.108 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' using the name '' in request data ...
2023-06-15 13:21:51.109 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 13:21:51.109 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 13:21:51.132 +07:00 [DBG] Connection id "0HMRDD328A8IS", Request id "0HMRDD328A8IS:00000002": started reading request body.
2023-06-15 13:21:51.132 +07:00 [DBG] Connection id "0HMRDD328A8IS", Request id "0HMRDD328A8IS:00000002": done reading request body.
2023-06-15 13:21:51.280 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:21:51.281 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:21:51.281 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 13:21:51.291 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:21:52.160 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 13:21:52.300 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName.ToLower() == __ToLower_0 && u.Password == __loginRequestDTO_Password_1)'
2023-06-15 13:21:52.794 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE (LOWER(l.UserName) == @__ToLower_0) && (l.Password == @__loginRequestDTO_Password_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 13:21:52.876 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 13:21:52.930 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (50ms).
2023-06-15 13:21:52.947 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:21:53.394 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:21:53.410 +07:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 13:21:53.493 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 13:21:53.533 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 13:21:53.568 +07:00 [DBG] A data reader was disposed.
2023-06-15 13:21:53.573 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:21:53.584 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:21:53.762 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 13:21:53.764 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 13:21:53.764 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 13:21:53.764 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 13:21:53.765 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 13:21:53.765 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 13:21:53.828 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample) in 3046.0193ms
2023-06-15 13:21:53.829 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:21:53.829 +07:00 [DBG] Connection id "0HMRDD328A8IS" completed keep alive response.
2023-06-15 13:21:53.833 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 13:21:53.839 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55 - 200 654 application/json;+charset=utf-8 3261.4319ms
2023-06-15 13:21:57.169 +07:00 [DBG] Connection id "0HMRDD328A8IS" received FIN.
2023-06-15 13:21:57.170 +07:00 [DBG] Connection id "0HMRDD328A8IS" sending FIN because: "The client closed the connection."
2023-06-15 13:21:57.170 +07:00 [DBG] Connection id "0HMRDD328A8IS" disconnecting.
2023-06-15 13:21:57.170 +07:00 [DBG] Connection id "0HMRDD328A8IS" stopped.
2023-06-15 13:22:08.836 +07:00 [DBG] Connection id "0HMRDD328A8IT" accepted.
2023-06-15 13:22:08.836 +07:00 [DBG] Connection id "0HMRDD328A8IT" started.
2023-06-15 13:22:08.837 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 13:22:08.839 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 13:22:08.839 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 13:22:08.839 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 13:22:08.839 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:22:08.849 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 13:22:08.951 +07:00 [DBG] Successfully validated the token.
2023-06-15 13:22:08.953 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 13:22:08.953 +07:00 [DBG] Connection id "0HMRDD328A8IT" completed keep alive response.
2023-06-15 13:22:08.954 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 116.5497ms
2023-06-15 13:22:12.174 +07:00 [DBG] Connection id "0HMRDD328A8IT" received FIN.
2023-06-15 13:22:12.174 +07:00 [DBG] Connection id "0HMRDD328A8IT" disconnecting.
2023-06-15 13:22:12.174 +07:00 [DBG] Connection id "0HMRDD328A8IT" sending FIN because: "The client closed the connection."
2023-06-15 13:22:12.184 +07:00 [DBG] Connection id "0HMRDD328A8IT" stopped.
2023-06-15 13:23:02.892 +07:00 [DBG] Connection id "0HMRDD328A8IU" accepted.
2023-06-15 13:23:02.902 +07:00 [DBG] Connection id "0HMRDD328A8IU" started.
2023-06-15 13:23:02.904 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI/2 - -
2023-06-15 13:23:02.904 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI/2'
2023-06-15 13:23:02.904 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI/{id}' is valid for the request path '/api/VillaAPI/2'
2023-06-15 13:23:02.904 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)'
2023-06-15 13:23:02.904 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:23:02.922 +07:00 [DBG] Successfully validated the token.
2023-06-15 13:23:02.922 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-06-15 13:23:02.923 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)'
2023-06-15 13:23:02.927 +07:00 [INF] Route matched with {action = "GetVilla", controller = "VillaAPI"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestfulAPICRUDExample.Models.DTO.VillaDTO]] GetVilla(Int32) on controller RestfulAPICRUDExample.Controllers.VillaAPIController (RestfulAPICRUDExample).
2023-06-15 13:23:02.927 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 13:23:02.927 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 13:23:02.927 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 13:23:02.927 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 13:23:02.927 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 13:23:02.928 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.VillaAPIController (RestfulAPICRUDExample)
2023-06-15 13:23:03.058 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.VillaAPIController (RestfulAPICRUDExample)
2023-06-15 13:23:03.058 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-06-15 13:23:03.058 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-06-15 13:23:03.059 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-06-15 13:23:03.059 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-06-15 13:23:03.060 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-06-15 13:23:03.060 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-06-15 13:23:03.083 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 13:23:03.096 +07:00 [DBG] Compiling query expression: 
'DbSet<Villa>()
    .Where(u => u.Id == __id_0)
    .FirstOrDefault()'
2023-06-15 13:23:03.104 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Villa>(
    asyncEnumerable: new SingleQueryingEnumerable<Villa>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Villa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Villa.Amenity (string) Required, 1], [Property: Villa.CreatedDate (DateTime) Required, 2], [Property: Villa.Details (string) Required, 3], [Property: Villa.ImageUrl (string) Required, 4], [Property: Villa.Name (string) Required, 5], [Property: Villa.Occupancy (int) Required, 6], [Property: Villa.Rate (double) Required, 7], [Property: Villa.Sqft (int) Required, 8], [Property: Villa.UpdatedDate (DateTime) Required, 9] }
            SELECT TOP(1) v.Id, v.Amenity, v.CreatedDate, v.Details, v.ImageUrl, v.Name, v.Occupancy, v.Rate, v.Sqft, v.UpdatedDate
            FROM Villas AS v
            WHERE v.Id == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Villa>, 
        RestfulAPICRUDExample.Data.ApplicationDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-06-15 13:23:03.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 13:23:03.137 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-06-15 13:23:03.147 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:23:03.157 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:23:03.162 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amenity], [v].[CreatedDate], [v].[Details], [v].[ImageUrl], [v].[Name], [v].[Occupancy], [v].[Rate], [v].[Sqft], [v].[UpdatedDate]
FROM [Villas] AS [v]
WHERE [v].[Id] = @__id_0
2023-06-15 13:23:03.214 +07:00 [INF] Executed DbCommand (55ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amenity], [v].[CreatedDate], [v].[Details], [v].[ImageUrl], [v].[Name], [v].[Occupancy], [v].[Rate], [v].[Sqft], [v].[UpdatedDate]
FROM [Villas] AS [v]
WHERE [v].[Id] = @__id_0
2023-06-15 13:23:03.244 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'Villa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 13:23:03.269 +07:00 [DBG] A data reader was disposed.
2023-06-15 13:23:03.276 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:23:03.277 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:23:03.294 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 13:23:03.295 +07:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-06-15 13:23:03.296 +07:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-06-15 13:23:03.296 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 13:23:03.296 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 13:23:03.296 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 13:23:03.296 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.DTO.VillaDTO'.
2023-06-15 13:23:03.301 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample) in 373.5199ms
2023-06-15 13:23:03.302 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)'
2023-06-15 13:23:03.305 +07:00 [DBG] Connection id "0HMRDD328A8IU" completed keep alive response.
2023-06-15 13:23:03.306 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 13:23:03.306 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI/2 - - - 200 128 application/json;+charset=utf-8 402.0471ms
2023-06-15 13:23:07.264 +07:00 [DBG] Connection id "0HMRDD328A8IU" received FIN.
2023-06-15 13:23:07.264 +07:00 [DBG] Connection id "0HMRDD328A8IU" disconnecting.
2023-06-15 13:23:07.264 +07:00 [DBG] Connection id "0HMRDD328A8IU" sending FIN because: "The client closed the connection."
2023-06-15 13:23:07.279 +07:00 [DBG] Connection id "0HMRDD328A8IU" stopped.
2023-06-15 13:27:46.177 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-06-15 13:27:46.282 +07:00 [DBG] Hosting starting
2023-06-15 13:27:46.334 +07:00 [INF] User profile is available. Using 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-15 13:27:46.466 +07:00 [DBG] Reading data from file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 13:27:46.489 +07:00 [DBG] Found key {2f4877b4-2456-4d34-a4e8-4b53811009c5}.
2023-06-15 13:27:46.506 +07:00 [DBG] Considering key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with expiration date 2023-09-13 02:55:11Z as default key.
2023-06-15 13:27:46.509 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 13:27:46.514 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-06-15 13:27:46.516 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 13:27:46.521 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-06-15 13:27:46.524 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-06-15 13:27:46.528 +07:00 [DBG] Using key {2f4877b4-2456-4d34-a4e8-4b53811009c5} as the default key.
2023-06-15 13:27:46.528 +07:00 [DBG] Key ring with default key {2f4877b4-2456-4d34-a4e8-4b53811009c5} was loaded during application startup.
2023-06-15 13:27:46.687 +07:00 [INF] Now listening on: http://localhost:5208
2023-06-15 13:27:46.687 +07:00 [DBG] Loaded hosting startup assembly RestfulAPICRUDExample
2023-06-15 13:27:46.687 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-06-15 13:27:46.687 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-06-15 13:27:46.687 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-15 13:27:46.687 +07:00 [INF] Hosting environment: Development
2023-06-15 13:27:46.687 +07:00 [INF] Content root path: C:\Users\This PC\source\repos\RestfulAPICRUDExample\RestfulAPICRUDExample\
2023-06-15 13:27:46.687 +07:00 [DBG] Hosting started
2023-06-15 13:27:46.873 +07:00 [DBG] Connection id "0HMRDD6H8BRPE" received FIN.
2023-06-15 13:27:46.873 +07:00 [DBG] Connection id "0HMRDD6H8BRPF" received FIN.
2023-06-15 13:27:46.897 +07:00 [DBG] Connection id "0HMRDD6H8BRPF" accepted.
2023-06-15 13:27:46.897 +07:00 [DBG] Connection id "0HMRDD6H8BRPE" accepted.
2023-06-15 13:27:46.898 +07:00 [DBG] Connection id "0HMRDD6H8BRPF" started.
2023-06-15 13:27:46.898 +07:00 [DBG] Connection id "0HMRDD6H8BRPE" started.
2023-06-15 13:27:46.911 +07:00 [DBG] Connection id "0HMRDD6H8BRPE" sending FIN because: "The client closed the connection."
2023-06-15 13:27:46.911 +07:00 [DBG] Connection id "0HMRDD6H8BRPF" sending FIN because: "The client closed the connection."
2023-06-15 13:27:46.916 +07:00 [DBG] Connection id "0HMRDD6H8BRPF" disconnecting.
2023-06-15 13:27:46.916 +07:00 [DBG] Connection id "0HMRDD6H8BRPE" disconnecting.
2023-06-15 13:27:46.939 +07:00 [DBG] Connection id "0HMRDD6H8BRPF" stopped.
2023-06-15 13:27:46.939 +07:00 [DBG] Connection id "0HMRDD6H8BRPE" stopped.
2023-06-15 13:27:47.580 +07:00 [DBG] Connection id "0HMRDD6H8BRPG" accepted.
2023-06-15 13:27:47.580 +07:00 [DBG] Connection id "0HMRDD6H8BRPG" started.
2023-06-15 13:27:47.582 +07:00 [DBG] Connection id "0HMRDD6H8BRPH" accepted.
2023-06-15 13:27:47.583 +07:00 [DBG] Connection id "0HMRDD6H8BRPH" started.
2023-06-15 13:27:47.643 +07:00 [DBG] Connection id "0HMRDD6H8BRPH" received FIN.
2023-06-15 13:27:47.647 +07:00 [DBG] Connection id "0HMRDD6H8BRPH" sending FIN because: "The client closed the connection."
2023-06-15 13:27:47.648 +07:00 [DBG] Connection id "0HMRDD6H8BRPH" disconnecting.
2023-06-15 13:27:47.668 +07:00 [DBG] Connection id "0HMRDD6H8BRPH" stopped.
2023-06-15 13:27:47.730 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2023-06-15 13:27:47.814 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-06-15 13:27:47.865 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-06-15 13:27:47.866 +07:00 [DBG] Request did not match any endpoints
2023-06-15 13:27:48.111 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-06-15 13:27:48.292 +07:00 [DBG] Connection id "0HMRDD6H8BRPI" accepted.
2023-06-15 13:27:48.292 +07:00 [DBG] Connection id "0HMRDD6H8BRPI" started.
2023-06-15 13:27:48.293 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2023-06-15 13:27:48.299 +07:00 [DBG] Connection id "0HMRDD6H8BRPI" completed keep alive response.
2023-06-15 13:27:48.301 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 6.7711ms
2023-06-15 13:27:48.316 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-06-15 13:27:48.316 +07:00 [DBG] Connection id "0HMRDD6H8BRPG" completed keep alive response.
2023-06-15 13:27:48.318 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_vs/browserLink - -
2023-06-15 13:27:48.319 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 598.6532ms
2023-06-15 13:27:48.374 +07:00 [DBG] Connection id "0HMRDD6H8BRPI" completed keep alive response.
2023-06-15 13:27:48.374 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 56.1541ms
2023-06-15 13:27:48.470 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2023-06-15 13:27:48.470 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-06-15 13:27:48.470 +07:00 [DBG] Request did not match any endpoints
2023-06-15 13:27:48.716 +07:00 [DBG] Connection id "0HMRDD6H8BRPI" completed keep alive response.
2023-06-15 13:27:48.716 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 246.5160ms
2023-06-15 13:27:57.631 +07:00 [DBG] Connection id "0HMRDD6H8BRPG" received FIN.
2023-06-15 13:27:57.631 +07:00 [DBG] Connection id "0HMRDD6H8BRPI" received FIN.
2023-06-15 13:27:57.631 +07:00 [DBG] Connection id "0HMRDD6H8BRPG" sending FIN because: "The client closed the connection."
2023-06-15 13:27:57.631 +07:00 [DBG] Connection id "0HMRDD6H8BRPI" sending FIN because: "The client closed the connection."
2023-06-15 13:27:57.631 +07:00 [DBG] Connection id "0HMRDD6H8BRPG" disconnecting.
2023-06-15 13:27:57.631 +07:00 [DBG] Connection id "0HMRDD6H8BRPG" stopped.
2023-06-15 13:27:57.631 +07:00 [DBG] Connection id "0HMRDD6H8BRPI" disconnecting.
2023-06-15 13:27:57.632 +07:00 [DBG] Connection id "0HMRDD6H8BRPI" stopped.
2023-06-15 13:28:17.847 +07:00 [DBG] Connection id "0HMRDD6H8BRPJ" accepted.
2023-06-15 13:28:17.855 +07:00 [DBG] Connection id "0HMRDD6H8BRPJ" started.
2023-06-15 13:28:17.856 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 13:28:17.876 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 13:28:17.879 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 13:28:17.879 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 13:28:17.881 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:28:17.889 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 13:28:18.018 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 13:28:18.018 +07:00 [DBG] Connection id "0HMRDD6H8BRPJ" completed keep alive response.
2023-06-15 13:28:18.018 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 162.2391ms
2023-06-15 13:28:26.032 +07:00 [DBG] Connection id "0HMRDD6H8BRPK" accepted.
2023-06-15 13:28:26.033 +07:00 [DBG] Connection id "0HMRDD6H8BRPK" started.
2023-06-15 13:28:26.039 +07:00 [DBG] Connection id "0HMRDD6H8BRPK" received FIN.
2023-06-15 13:28:26.040 +07:00 [DBG] Connection id "0HMRDD6H8BRPL" accepted.
2023-06-15 13:28:26.040 +07:00 [DBG] Connection id "0HMRDD6H8BRPK" disconnecting.
2023-06-15 13:28:26.042 +07:00 [DBG] Connection id "0HMRDD6H8BRPL" started.
2023-06-15 13:28:26.042 +07:00 [DBG] Connection id "0HMRDD6H8BRPK" sending FIN because: "The client closed the connection."
2023-06-15 13:28:26.046 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 13:28:26.079 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 13:28:26.079 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 13:28:26.081 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 13:28:26.081 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:28:26.086 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 13:28:26.086 +07:00 [DBG] Connection id "0HMRDD6H8BRPK" stopped.
2023-06-15 13:28:26.089 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 13:28:26.089 +07:00 [DBG] Connection id "0HMRDD6H8BRPL" completed keep alive response.
2023-06-15 13:28:26.089 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 42.9494ms
2023-06-15 13:28:27.686 +07:00 [DBG] Connection id "0HMRDD6H8BRPJ" received FIN.
2023-06-15 13:28:27.686 +07:00 [DBG] Connection id "0HMRDD6H8BRPJ" sending FIN because: "The client closed the connection."
2023-06-15 13:28:27.686 +07:00 [DBG] Connection id "0HMRDD6H8BRPJ" disconnecting.
2023-06-15 13:28:27.686 +07:00 [DBG] Connection id "0HMRDD6H8BRPJ" stopped.
2023-06-15 13:28:41.677 +07:00 [DBG] Connection id "0HMRDD6H8BRPM" accepted.
2023-06-15 13:28:41.677 +07:00 [DBG] Connection id "0HMRDD6H8BRPM" started.
2023-06-15 13:28:41.678 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55
2023-06-15 13:28:41.678 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth/login'
2023-06-15 13:28:41.678 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth/login' is valid for the request path '/api/UsersAuth/login'
2023-06-15 13:28:41.678 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:28:41.678 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:28:41.684 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 13:28:41.684 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:28:41.735 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RestfulAPICRUDExample.Models.DTO.LoginRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 13:28:41.736 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 13:28:41.736 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 13:28:41.736 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 13:28:41.736 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 13:28:41.736 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 13:28:41.737 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 13:28:41.986 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 13:28:42.023 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 13:28:42.029 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 13:28:42.031 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' using the name '' in request data ...
2023-06-15 13:28:42.032 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 13:28:42.032 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 13:28:42.053 +07:00 [DBG] Connection id "0HMRDD6H8BRPM", Request id "0HMRDD6H8BRPM:00000002": started reading request body.
2023-06-15 13:28:42.053 +07:00 [DBG] Connection id "0HMRDD6H8BRPM", Request id "0HMRDD6H8BRPM:00000002": done reading request body.
2023-06-15 13:28:42.200 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:28:42.200 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:28:42.200 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 13:28:42.207 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:28:43.082 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 13:28:43.225 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName.ToLower() == __ToLower_0 && u.Password == __loginRequestDTO_Password_1)'
2023-06-15 13:28:43.734 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE (LOWER(l.UserName) == @__ToLower_0) && (l.Password == @__loginRequestDTO_Password_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 13:28:43.822 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 13:28:43.899 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (73ms).
2023-06-15 13:28:43.918 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:28:44.353 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:28:44.369 +07:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 13:28:44.460 +07:00 [INF] Executed DbCommand (94ms) [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 13:28:44.519 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 13:28:44.574 +07:00 [DBG] A data reader was disposed.
2023-06-15 13:28:44.579 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:28:44.590 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:28:44.752 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 13:28:44.754 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 13:28:44.754 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 13:28:44.754 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 13:28:44.755 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 13:28:44.755 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 13:28:44.854 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample) in 3109.7048ms
2023-06-15 13:28:44.854 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:28:44.855 +07:00 [DBG] Connection id "0HMRDD6H8BRPM" completed keep alive response.
2023-06-15 13:28:44.862 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 13:28:44.866 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55 - 200 654 application/json;+charset=utf-8 3188.0456ms
2023-06-15 13:28:47.717 +07:00 [DBG] Connection id "0HMRDD6H8BRPM" received FIN.
2023-06-15 13:28:47.718 +07:00 [DBG] Connection id "0HMRDD6H8BRPM" disconnecting.
2023-06-15 13:28:47.718 +07:00 [DBG] Connection id "0HMRDD6H8BRPM" stopped.
2023-06-15 13:28:47.718 +07:00 [DBG] Connection id "0HMRDD6H8BRPM" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-06-15 13:28:58.386 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 13:28:58.386 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 13:28:58.386 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 13:28:58.387 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 13:28:58.387 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:28:58.387 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 13:28:58.474 +07:00 [DBG] Successfully validated the token.
2023-06-15 13:28:58.475 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 13:28:58.475 +07:00 [DBG] Connection id "0HMRDD6H8BRPL" completed keep alive response.
2023-06-15 13:28:58.475 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 89.2991ms
2023-06-15 13:32:14.518 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-06-15 13:32:14.622 +07:00 [DBG] Hosting starting
2023-06-15 13:32:14.665 +07:00 [INF] User profile is available. Using 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-06-15 13:32:14.690 +07:00 [DBG] Reading data from file 'C:\Users\This PC\AppData\Local\ASP.NET\DataProtection-Keys\key-2f4877b4-2456-4d34-a4e8-4b53811009c5.xml'.
2023-06-15 13:32:14.704 +07:00 [DBG] Found key {2f4877b4-2456-4d34-a4e8-4b53811009c5}.
2023-06-15 13:32:14.719 +07:00 [DBG] Considering key {2f4877b4-2456-4d34-a4e8-4b53811009c5} with expiration date 2023-09-13 02:55:11Z as default key.
2023-06-15 13:32:14.721 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 13:32:14.724 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-06-15 13:32:14.726 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-06-15 13:32:14.730 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-06-15 13:32:14.732 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-06-15 13:32:14.738 +07:00 [DBG] Using key {2f4877b4-2456-4d34-a4e8-4b53811009c5} as the default key.
2023-06-15 13:32:14.739 +07:00 [DBG] Key ring with default key {2f4877b4-2456-4d34-a4e8-4b53811009c5} was loaded during application startup.
2023-06-15 13:32:15.202 +07:00 [INF] Now listening on: http://localhost:5208
2023-06-15 13:32:15.202 +07:00 [DBG] Loaded hosting startup assembly RestfulAPICRUDExample
2023-06-15 13:32:15.202 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-06-15 13:32:15.202 +07:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-06-15 13:32:15.202 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-06-15 13:32:15.202 +07:00 [INF] Hosting environment: Development
2023-06-15 13:32:15.202 +07:00 [INF] Content root path: C:\Users\This PC\source\repos\RestfulAPICRUDExample\RestfulAPICRUDExample\
2023-06-15 13:32:15.202 +07:00 [DBG] Hosting started
2023-06-15 13:32:15.229 +07:00 [DBG] Connection id "0HMRDD917I8LL" accepted.
2023-06-15 13:32:15.230 +07:00 [DBG] Connection id "0HMRDD917I8LL" started.
2023-06-15 13:32:15.243 +07:00 [DBG] Connection id "0HMRDD917I8LL" received FIN.
2023-06-15 13:32:15.263 +07:00 [DBG] Connection id "0HMRDD917I8LL" sending FIN because: "The client closed the connection."
2023-06-15 13:32:15.266 +07:00 [DBG] Connection id "0HMRDD917I8LL" disconnecting.
2023-06-15 13:32:15.270 +07:00 [DBG] Connection id "0HMRDD917I8LL" stopped.
2023-06-15 13:32:15.665 +07:00 [DBG] Connection id "0HMRDD917I8LM" accepted.
2023-06-15 13:32:15.666 +07:00 [DBG] Connection id "0HMRDD917I8LN" accepted.
2023-06-15 13:32:15.669 +07:00 [DBG] Connection id "0HMRDD917I8LM" started.
2023-06-15 13:32:15.669 +07:00 [DBG] Connection id "0HMRDD917I8LN" started.
2023-06-15 13:32:15.778 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/index.html - -
2023-06-15 13:32:15.850 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-06-15 13:32:15.890 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-06-15 13:32:15.890 +07:00 [DBG] Request did not match any endpoints
2023-06-15 13:32:16.041 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-06-15 13:32:16.238 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-06-15 13:32:16.238 +07:00 [DBG] Connection id "0HMRDD917I8LM" completed keep alive response.
2023-06-15 13:32:16.250 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/index.html - - - 200 - text/html;charset=utf-8 474.7475ms
2023-06-15 13:32:16.258 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_vs/browserLink - -
2023-06-15 13:32:16.280 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - -
2023-06-15 13:32:16.292 +07:00 [DBG] Connection id "0HMRDD917I8LM" completed keep alive response.
2023-06-15 13:32:16.292 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_framework/aspnetcore-browser-refresh.js - - - 200 12012 application/javascript;+charset=utf-8 12.6383ms
2023-06-15 13:32:16.313 +07:00 [DBG] Connection id "0HMRDD917I8LN" completed keep alive response.
2023-06-15 13:32:16.313 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 55.5299ms
2023-06-15 13:32:16.397 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - -
2023-06-15 13:32:16.397 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-06-15 13:32:16.397 +07:00 [DBG] Request did not match any endpoints
2023-06-15 13:32:16.649 +07:00 [DBG] Connection id "0HMRDD917I8LN" completed keep alive response.
2023-06-15 13:32:16.649 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 252.6529ms
2023-06-15 13:32:18.122 +07:00 [DBG] Connection id "0HMRDD917I8LM" received FIN.
2023-06-15 13:32:18.122 +07:00 [DBG] Connection id "0HMRDD917I8LN" received FIN.
2023-06-15 13:32:18.125 +07:00 [DBG] Connection id "0HMRDD917I8LM" disconnecting.
2023-06-15 13:32:18.125 +07:00 [DBG] Connection id "0HMRDD917I8LM" stopped.
2023-06-15 13:32:18.126 +07:00 [DBG] Connection id "0HMRDD917I8LN" sending FIN because: "The client closed the connection."
2023-06-15 13:32:18.128 +07:00 [DBG] Connection id "0HMRDD917I8LM" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-06-15 13:32:18.129 +07:00 [DBG] Connection id "0HMRDD917I8LN" disconnecting.
2023-06-15 13:32:18.134 +07:00 [DBG] Connection id "0HMRDD917I8LN" stopped.
2023-06-15 13:32:19.329 +07:00 [DBG] Connection id "0HMRDD917I8LO" accepted.
2023-06-15 13:32:19.329 +07:00 [DBG] Connection id "0HMRDD917I8LO" started.
2023-06-15 13:32:19.330 +07:00 [DBG] Connection id "0HMRDD917I8LO" received FIN.
2023-06-15 13:32:19.330 +07:00 [DBG] Connection id "0HMRDD917I8LP" accepted.
2023-06-15 13:32:19.331 +07:00 [DBG] Connection id "0HMRDD917I8LP" started.
2023-06-15 13:32:19.330 +07:00 [DBG] Connection id "0HMRDD917I8LO" disconnecting.
2023-06-15 13:32:19.331 +07:00 [DBG] Connection id "0HMRDD917I8LO" sending FIN because: "The client closed the connection."
2023-06-15 13:32:19.331 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 13:32:19.337 +07:00 [DBG] Connection id "0HMRDD917I8LO" stopped.
2023-06-15 13:32:19.339 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 13:32:19.342 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 13:32:19.342 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 13:32:19.343 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:32:19.349 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 13:32:19.749 +07:00 [DBG] Successfully validated the token.
2023-06-15 13:32:19.750 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 13:32:19.751 +07:00 [DBG] Connection id "0HMRDD917I8LP" completed keep alive response.
2023-06-15 13:32:19.751 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 419.9406ms
2023-06-15 13:32:35.443 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI/1 - -
2023-06-15 13:32:35.444 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI/1'
2023-06-15 13:32:35.444 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI/{id}' is valid for the request path '/api/VillaAPI/1'
2023-06-15 13:32:35.444 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)'
2023-06-15 13:32:35.444 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:32:35.446 +07:00 [DBG] Successfully validated the token.
2023-06-15 13:32:35.446 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-06-15 13:32:35.447 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)'
2023-06-15 13:32:35.475 +07:00 [INF] Route matched with {action = "GetVilla", controller = "VillaAPI"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[RestfulAPICRUDExample.Models.DTO.VillaDTO]] GetVilla(Int32) on controller RestfulAPICRUDExample.Controllers.VillaAPIController (RestfulAPICRUDExample).
2023-06-15 13:32:35.476 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 13:32:35.476 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 13:32:35.476 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 13:32:35.476 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 13:32:35.476 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 13:32:35.477 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.VillaAPIController (RestfulAPICRUDExample)
2023-06-15 13:32:35.693 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2023-06-15 13:32:35.872 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.VillaAPIController (RestfulAPICRUDExample)
2023-06-15 13:32:35.876 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-06-15 13:32:35.878 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-06-15 13:32:35.879 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-06-15 13:32:35.879 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-06-15 13:32:35.879 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-06-15 13:32:35.880 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-06-15 13:32:36.702 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 13:32:36.858 +07:00 [DBG] Compiling query expression: 
'DbSet<Villa>()
    .Where(u => u.Id == __id_0)
    .FirstOrDefault()'
2023-06-15 13:32:37.264 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Villa>(
    asyncEnumerable: new SingleQueryingEnumerable<Villa>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Villa.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Villa.Amenity (string) Required, 1], [Property: Villa.CreatedDate (DateTime) Required, 2], [Property: Villa.Details (string) Required, 3], [Property: Villa.ImageUrl (string) Required, 4], [Property: Villa.Name (string) Required, 5], [Property: Villa.Occupancy (int) Required, 6], [Property: Villa.Rate (double) Required, 7], [Property: Villa.Sqft (int) Required, 8], [Property: Villa.UpdatedDate (DateTime) Required, 9] }
            SELECT TOP(1) v.Id, v.Amenity, v.CreatedDate, v.Details, v.ImageUrl, v.Name, v.Occupancy, v.Rate, v.Sqft, v.UpdatedDate
            FROM Villas AS v
            WHERE v.Id == @__id_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Villa>, 
        RestfulAPICRUDExample.Data.ApplicationDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-06-15 13:32:37.369 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 13:32:37.447 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (72ms).
2023-06-15 13:32:37.476 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:32:37.925 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:32:37.945 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amenity], [v].[CreatedDate], [v].[Details], [v].[ImageUrl], [v].[Name], [v].[Occupancy], [v].[Rate], [v].[Sqft], [v].[UpdatedDate]
FROM [Villas] AS [v]
WHERE [v].[Id] = @__id_0
2023-06-15 13:32:38.063 +07:00 [INF] Executed DbCommand (121ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amenity], [v].[CreatedDate], [v].[Details], [v].[ImageUrl], [v].[Name], [v].[Occupancy], [v].[Rate], [v].[Sqft], [v].[UpdatedDate]
FROM [Villas] AS [v]
WHERE [v].[Id] = @__id_0
2023-06-15 13:32:38.135 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'Villa' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 13:32:38.200 +07:00 [DBG] A data reader was disposed.
2023-06-15 13:32:38.208 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:32:38.218 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:32:38.242 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 13:32:38.244 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 13:32:38.245 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 13:32:38.245 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 13:32:38.246 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 13:32:38.246 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.DTO.VillaDTO'.
2023-06-15 13:32:38.417 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample) in 2932.2686ms
2023-06-15 13:32:38.419 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVilla (RestfulAPICRUDExample)'
2023-06-15 13:32:38.424 +07:00 [DBG] Connection id "0HMRDD917I8LP" completed keep alive response.
2023-06-15 13:32:38.431 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 13:32:38.436 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI/1 - - - 200 133 application/json;+charset=utf-8 2993.0428ms
2023-06-15 13:32:42.347 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 13:32:42.348 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 13:32:42.348 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 13:32:42.348 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 13:32:42.348 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:32:42.348 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 13:32:42.350 +07:00 [DBG] Successfully validated the token.
2023-06-15 13:32:42.350 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 13:32:42.350 +07:00 [DBG] Connection id "0HMRDD917I8LP" completed keep alive response.
2023-06-15 13:32:42.350 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 2.5745ms
2023-06-15 13:34:06.336 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5208/api/VillaAPI - -
2023-06-15 13:34:06.337 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 13:34:06.338 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 13:34:06.339 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.GetVillas (RestfulAPICRUDExample)'
2023-06-15 13:34:06.339 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:34:06.340 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-06-15 13:34:06.340 +07:00 [DBG] Successfully validated the token.
2023-06-15 13:34:06.340 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 13:34:06.340 +07:00 [DBG] Connection id "0HMRDD917I8LP" completed keep alive response.
2023-06-15 13:34:06.341 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5208/api/VillaAPI - - - 401 0 - 4.7083ms
2023-06-15 13:34:37.053 +07:00 [DBG] Connection id "0HMRDD917I8LQ" accepted.
2023-06-15 13:34:37.063 +07:00 [DBG] Connection id "0HMRDD917I8LQ" started.
2023-06-15 13:34:37.072 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55
2023-06-15 13:34:37.072 +07:00 [DBG] 1 candidate(s) found for the request path '/api/UsersAuth/login'
2023-06-15 13:34:37.072 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)' with route pattern 'api/UsersAuth/login' is valid for the request path '/api/UsersAuth/login'
2023-06-15 13:34:37.072 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:34:37.072 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:34:37.073 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-06-15 13:34:37.073 +07:00 [INF] Executing endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:34:37.084 +07:00 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(RestfulAPICRUDExample.Models.DTO.LoginRequestDTO) on controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample).
2023-06-15 13:34:37.085 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-06-15 13:34:37.085 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-06-15 13:34:37.085 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-06-15 13:34:37.085 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-06-15 13:34:37.085 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-06-15 13:34:37.085 +07:00 [DBG] Executing controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 13:34:37.086 +07:00 [DBG] Executed controller factory for controller RestfulAPICRUDExample.Controllers.UsersController (RestfulAPICRUDExample)
2023-06-15 13:34:37.086 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 13:34:37.087 +07:00 [DBG] Attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' using the name '' in request data ...
2023-06-15 13:34:37.088 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonPatchInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 13:34:37.088 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonInputFormatter' for content type 'application/json-patch+json'.
2023-06-15 13:34:37.103 +07:00 [DBG] Connection id "0HMRDD917I8LQ", Request id "0HMRDD917I8LQ:00000002": started reading request body.
2023-06-15 13:34:37.104 +07:00 [DBG] Connection id "0HMRDD917I8LQ", Request id "0HMRDD917I8LQ:00000002": done reading request body.
2023-06-15 13:34:37.165 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:34:37.165 +07:00 [DBG] Done attempting to bind parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:34:37.165 +07:00 [DBG] Attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO' ...
2023-06-15 13:34:37.172 +07:00 [DBG] Done attempting to validate the bound parameter 'model' of type 'RestfulAPICRUDExample.Models.DTO.LoginRequestDTO'.
2023-06-15 13:34:37.200 +07:00 [INF] Entity Framework Core 6.0.18 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.18' with options: None
2023-06-15 13:34:37.204 +07:00 [DBG] Compiling query expression: 
'DbSet<LocalUser>()
    .FirstOrDefault(u => u.UserName.ToLower() == __ToLower_0 && u.Password == __loginRequestDTO_Password_1)'
2023-06-15 13:34:37.258 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<LocalUser>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: LocalUser.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: LocalUser.Name (string) Required, 1], [Property: LocalUser.Password (string) Required, 2], [Property: LocalUser.Role (string) Required, 3], [Property: LocalUser.UserName (string) Required, 4] }
        SELECT TOP(1) l.Id, l.Name, l.Password, l.Role, l.UserName
        FROM LocalUsers AS l
        WHERE (LOWER(l.UserName) == @__ToLower_0) && (l.Password == @__loginRequestDTO_Password_1)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, LocalUser>, 
    RestfulAPICRUDExample.Data.ApplicationDbContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-06-15 13:34:37.276 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-06-15 13:34:37.277 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-06-15 13:34:37.282 +07:00 [DBG] Opening connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:34:37.287 +07:00 [DBG] Opened connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:34:37.288 +07:00 [DBG] Executing DbCommand [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 13:34:37.295 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ToLower_0='?' (Size = 4000), @__loginRequestDTO_Password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [l].[Id], [l].[Name], [l].[Password], [l].[Role], [l].[UserName]
FROM [LocalUsers] AS [l]
WHERE (LOWER([l].[UserName]) = @__ToLower_0) AND ([l].[Password] = @__loginRequestDTO_Password_1)
2023-06-15 13:34:37.300 +07:00 [DBG] Context 'ApplicationDbContext' started tracking 'LocalUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-06-15 13:34:37.306 +07:00 [DBG] A data reader was disposed.
2023-06-15 13:34:37.308 +07:00 [DBG] Closing connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:34:37.309 +07:00 [DBG] Closed connection to database 'Magic_VillaAPI' on server '(local)'.
2023-06-15 13:34:37.341 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.XmlDataContractSerializerOutputFormatter"]
2023-06-15 13:34:37.341 +07:00 [DBG] No information found on request to perform content negotiation.
2023-06-15 13:34:37.341 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-06-15 13:34:37.341 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-06-15 13:34:37.341 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.NewtonsoftJsonOutputFormatter' and content type 'application/json' to write the response.
2023-06-15 13:34:37.341 +07:00 [INF] Executing OkObjectResult, writing value of type 'RestfulAPICRUDExample.Models.APIResponse'.
2023-06-15 13:34:37.359 +07:00 [INF] Executed action RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample) in 274.5055ms
2023-06-15 13:34:37.359 +07:00 [INF] Executed endpoint 'RestfulAPICRUDExample.Controllers.UsersController.Login (RestfulAPICRUDExample)'
2023-06-15 13:34:37.360 +07:00 [DBG] Connection id "0HMRDD917I8LQ" completed keep alive response.
2023-06-15 13:34:37.360 +07:00 [DBG] 'ApplicationDbContext' disposed.
2023-06-15 13:34:37.360 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/UsersAuth/login application/json-patch+json 55 - 200 654 application/json;+charset=utf-8 287.7000ms
2023-06-15 13:34:38.275 +07:00 [DBG] Connection id "0HMRDD917I8LQ" received FIN.
2023-06-15 13:34:38.276 +07:00 [DBG] Connection id "0HMRDD917I8LQ" sending FIN because: "The client closed the connection."
2023-06-15 13:34:38.276 +07:00 [DBG] Connection id "0HMRDD917I8LQ" disconnecting.
2023-06-15 13:34:38.276 +07:00 [DBG] Connection id "0HMRDD917I8LQ" stopped.
2023-06-15 13:35:10.716 +07:00 [DBG] Connection id "0HMRDD917I8LR" accepted.
2023-06-15 13:35:10.725 +07:00 [DBG] Connection id "0HMRDD917I8LR" started.
2023-06-15 13:35:10.732 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5208/api/VillaAPI application/json-patch+json 146
2023-06-15 13:35:10.732 +07:00 [DBG] 1 candidate(s) found for the request path '/api/VillaAPI'
2023-06-15 13:35:10.732 +07:00 [DBG] Endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.CreateVilla (RestfulAPICRUDExample)' with route pattern 'api/VillaAPI' is valid for the request path '/api/VillaAPI'
2023-06-15 13:35:10.732 +07:00 [DBG] Request matched endpoint 'RestfulAPICRUDExample.Controllers.VillaAPIController.CreateVilla (RestfulAPICRUDExample)'
2023-06-15 13:35:10.732 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-06-15 13:35:10.740 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin)
2023-06-15 13:35:10.740 +07:00 [DBG] Successfully validated the token.
2023-06-15 13:35:10.741 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-06-15 13:35:10.741 +07:00 [DBG] Connection id "0HMRDD917I8LR" completed keep alive response.
2023-06-15 13:35:10.741 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5208/api/VillaAPI application/json-patch+json 146 - 401 0 - 8.8927ms
2023-06-15 13:35:10.741 +07:00 [DBG] Connection id "0HMRDD917I8LR", Request id "0HMRDD917I8LR:00000002": started reading request body.
2023-06-15 13:35:10.741 +07:00 [DBG] Connection id "0HMRDD917I8LR", Request id "0HMRDD917I8LR:00000002": done reading request body.
2023-06-15 13:35:13.331 +07:00 [DBG] Connection id "0HMRDD917I8LR" received FIN.
2023-06-15 13:35:13.332 +07:00 [DBG] Connection id "0HMRDD917I8LR" sending FIN because: "The client closed the connection."
2023-06-15 13:35:13.334 +07:00 [DBG] Connection id "0HMRDD917I8LR" disconnecting.
2023-06-15 13:35:13.334 +07:00 [DBG] Connection id "0HMRDD917I8LR" stopped.
